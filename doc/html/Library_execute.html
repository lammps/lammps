

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.1.2. Executing commands &mdash; LAMMPS documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/lammps.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/lammps.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
  <script src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="1.1.3. System properties" href="Library_properties.html" />
    <link rel="prev" title="1.1.1. Creating or deleting a LAMMPS object" href="Library_create.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="Manual.html">
          

          
            
            <img src="_static/lammps-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="lammps_version">Version: <b>24 Dec 2020</b></div>
              <div class="lammps_release">git info: patch 24Dec2020-115-g2b8a0d310</div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Install.html">2. Install LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Build.html">3. Build LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Run_head.html">4. Run LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Commands.html">5. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Packages.html">6. Optional packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Speed.html">7. Accelerate performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Howto.html">8. Howto discussions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">9. Example scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tools.html">10. Auxiliary tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="Errors.html">11. Errors</a></li>
</ul>
<p class="caption"><span class="caption-text">Programmer Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="Library.html">1. LAMMPS Library Interfaces</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="Library.html#lammps-c-library-api">1.1. LAMMPS C Library API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Library_create.html">1.1.1. Creating or deleting a LAMMPS object</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">1.1.2. Executing commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="Library_properties.html">1.1.3. System properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="Library_atoms.html">1.1.4. Per-atom properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="Library_objects.html">1.1.5. Compute, fixes, variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="Library_scatter.html">1.1.6. Scatter/gather operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="Library_neighbor.html">1.1.7. Neighbor list access</a></li>
<li class="toctree-l3"><a class="reference internal" href="Library_config.html">1.1.8. Configuration information</a></li>
<li class="toctree-l3"><a class="reference internal" href="Library_utility.html">1.1.9. Utility functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="Library_add.html">1.1.10. Extending the C API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Library.html#lammps-python-apis">1.2. LAMMPS Python APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="Library.html#lammps-fortran-api">1.3. LAMMPS Fortran API</a></li>
<li class="toctree-l2"><a class="reference internal" href="Library.html#lammps-cplusplus-api">1.4. LAMMPS C++ API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Python_head.html">2. Use Python with LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Modify.html">3. Modifying &amp; extending LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Developer.html">4. Information for Developers</a></li>
</ul>
<p class="caption"><span class="caption-text">Index</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="commands_list.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="fixes.html">Fixes</a></li>
<li class="toctree-l1"><a class="reference internal" href="computes.html">Computes</a></li>
<li class="toctree-l1"><a class="reference internal" href="pairs.html">Pair Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="bonds.html">Bond Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="angles.html">Angle Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="dihedrals.html">Dihedral Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="impropers.html">Improper Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="fix_modify_atc_commands.html">fix_modify AtC commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Bibliography.html">Bibliography</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="Manual.html">LAMMPS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="Manual.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="Library.html"><span class="section-number">1. </span>LAMMPS Library Interfaces</a> &raquo;</li>
        
      <li><span class="section-number">1.1.2. </span>Executing commands</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
          <a href="http://lammps.sandia.gov">Website</a>
          <a href="Commands_all.html">Commands</a>
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="Library_properties.html" class="btn btn-neutral float-right" title="1.1.3. System properties" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Library_create.html" class="btn btn-neutral float-left" title="1.1.1. Creating or deleting a LAMMPS object" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="executing-commands">
<h1><span class="section-number">1.1.2. </span>Executing commands<a class="headerlink" href="#executing-commands" title="Permalink to this headline">¶</a></h1>
<p>This section documents the following functions:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#_CPPv411lammps_filePvPKc" title="lammps_file"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_file()</span></code></a></p></li>
<li><p><a class="reference internal" href="#_CPPv414lammps_commandPvPKc" title="lammps_command"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_command()</span></code></a></p></li>
<li><p><a class="reference internal" href="#_CPPv420lammps_commands_listPviPPKc" title="lammps_commands_list"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_commands_list()</span></code></a></p></li>
<li><p><a class="reference internal" href="#_CPPv422lammps_commands_stringPvPKc" title="lammps_commands_string"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_commands_string()</span></code></a></p></li>
</ul>
<hr class="docutils" />
<p>Once a LAMMPS instance is created, there are multiple ways to “drive” a
simulation.  In most cases it is easiest to process single or multiple
LAMMPS commands like in an input file.  This can be done through reading
a file or passing single commands or lists of commands or blocks of
commands with the following functions.</p>
<p>Via these functions, the calling code can have LAMMPS act on a series
of <a class="reference internal" href="Commands_all.html"><span class="doc">input file commands</span></a> that are either read from
a file or passed as strings.  For example, this allows setup of a
problem from an input script, and then running it in stages while
performing other operations in between or concurrently.  The caller
can interleave the LAMMPS function calls with operations it performs,
such as calls to extract information from or set information within
LAMMPS, or calls to another code’s library.</p>
<p>Just as with <a class="reference internal" href="Commands_parse.html"><span class="doc">input script parsing</span></a> comments can
be included in the file or strings, and expansion of variables with
<code class="docutils literal notranslate"><span class="pre">${name}</span></code> or <code class="docutils literal notranslate"><span class="pre">$(expression)</span></code> syntax is performed.
Below is a short example using some of these functions.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cm">/* define to make the otherwise hidden prototype for &quot;lammps_open()&quot; visible */</span>
<span class="cp">#define LAMMPS_LIB_MPI</span>
<span class="cp">#include</span> <span class="cpf">&quot;library.h&quot;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;mpi.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
  <span class="kt">void</span> <span class="o">*</span><span class="n">handle</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

  <span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>
  <span class="n">handle</span> <span class="o">=</span> <span class="n">lammps_open</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">MPI_COMM_WORLD</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
  <span class="n">lammps_file</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="s">&quot;in.sysinit&quot;</span><span class="p">);</span>
  <span class="n">lammps_command</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="s">&quot;run 1000 post no&quot;</span><span class="p">);</span>

  <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">lammps_commands_string</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="s">&quot;run 100 pre no post no</span><span class="se">\n</span><span class="s">&quot;</span>
                                  <span class="s">&quot;print &#39;PE = $(pe)&#39;</span><span class="se">\n</span><span class="s">&quot;</span>
                                  <span class="s">&quot;print &#39;KE = $(ke)&#39;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">lammps_close</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
  <span class="n">MPI_Finalize</span><span class="p">();</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<hr class="docutils" />
<dl class="cpp function">
<dt id="_CPPv411lammps_filePvPKc">
<span id="_CPPv311lammps_filePvPKc"></span><span id="_CPPv211lammps_filePvPKc"></span><span id="lammps_file__voidP.cCP"></span><span class="target" id="library_8h_1a76c1ce1af98c09978578c7a94d778c0b"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">lammps_file</span></code><span class="sig-paren">(</span><span class="pre">void</span> <span class="pre">*</span><em><span class="pre">handle</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv411lammps_filePvPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Process LAMMPS input from a file.</p>
<p><p>This function processes commands in the file pointed to by <em>filename</em>
line by line and thus functions very similar to the <a class="reference internal" href="include.html"><span class="doc">include</span></a> command. The function returns when the end of the file is
reached and the commands have completed.</p>
<p>The actual work is done by the functions
<a class="reference internal" href="Classes_input.html#_CPPv4N9LAMMPS_NS5Input4fileEPKc" title="void LAMMPS_NS::Input::file(const char*)"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Input::file(const</span> <span class="pre">char</span> <span class="pre">*)</span></code></a>
and <a class="reference internal" href="Classes_input.html#_CPPv4N9LAMMPS_NS5Input4fileEv" title="void LAMMPS_NS::Input::file()"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Input::file()</span></code></a>.</p>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> – pointer to a previously created LAMMPS instance </p></li>
<li><p><strong>filename</strong> – name of a file with LAMMPS input </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<hr class="docutils" />
<dl class="cpp function">
<dt id="_CPPv414lammps_commandPvPKc">
<span id="_CPPv314lammps_commandPvPKc"></span><span id="_CPPv214lammps_commandPvPKc"></span><span id="lammps_command__voidP.cCP"></span><span class="target" id="library_8h_1a81fbef297272938327713bda40d40e0e"></span><span class="pre">char</span> <span class="pre">*</span><code class="sig-name descname"><span class="pre">lammps_command</span></code><span class="sig-paren">(</span><span class="pre">void</span> <span class="pre">*</span><em><span class="pre">handle</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">cmd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv414lammps_commandPvPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Process a single LAMMPS input command from a string.</p>
<p><p>This function tells LAMMPS to execute the single command in the string
<em>cmd</em>.  The entire string is considered as command and need not have a
(final) newline character.  Newline characters in the body of the
string, however, will be treated as part of the command and will <strong>not</strong>
start a second command.  The function <a class="reference internal" href="#_CPPv422lammps_commands_stringPvPKc" title="lammps_commands_string"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_commands_string()</span></code></a>
processes a string with multiple command lines.</p>
<p>The function returns the name of the command on success or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> when
passing a string without a command.</p>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> – pointer to a previously created LAMMPS instance </p></li>
<li><p><strong>cmd</strong> – string with a single LAMMPS command </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string with parsed command name or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> </p>
</dd>
</dl>
</dd></dl>

<hr class="docutils" />
<dl class="cpp function">
<dt id="_CPPv420lammps_commands_listPviPPKc">
<span id="_CPPv320lammps_commands_listPviPPKc"></span><span id="_CPPv220lammps_commands_listPviPPKc"></span><span id="lammps_commands_list__voidP.i.cCPP"></span><span class="target" id="library_8h_1ab542f51c42bcf8e39b64722ffa426890"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">lammps_commands_list</span></code><span class="sig-paren">(</span><span class="pre">void</span> <span class="pre">*</span><em><span class="pre">handle</span></em>, <span class="pre">int</span> <em><span class="pre">ncmd</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><span class="pre">*</span><em><span class="pre">cmds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv420lammps_commands_listPviPPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Process multiple LAMMPS input commands from list of strings.</p>
<p>This function processes multiple commands from a list of strings by
first concatenating the individual strings in <em>cmds</em> into a single
string, inserting newline characters as needed.  The combined string
is passed to <a class="reference internal" href="#_CPPv422lammps_commands_stringPvPKc" title="lammps_commands_string"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_commands_string()</span></code></a> for processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> – pointer to a previously created LAMMPS instance </p></li>
<li><p><strong>ncmd</strong> – number of lines in <em>cmds</em> </p></li>
<li><p><strong>cmds</strong> – list of strings with LAMMPS commands </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<hr class="docutils" />
<dl class="cpp function">
<dt id="_CPPv422lammps_commands_stringPvPKc">
<span id="_CPPv322lammps_commands_stringPvPKc"></span><span id="_CPPv222lammps_commands_stringPvPKc"></span><span id="lammps_commands_string__voidP.cCP"></span><span class="target" id="library_8h_1a82b8d3fb9db7e0a834f6da0996e61d6b"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">lammps_commands_string</span></code><span class="sig-paren">(</span><span class="pre">void</span> <span class="pre">*</span><em><span class="pre">handle</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv422lammps_commands_stringPvPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Process a block of LAMMPS input commands from a single string.</p>
<p>This function processes a multi-line string similar to a block of
commands from a file.  The string may have multiple lines (separated by
newline characters) and also single commands may be distributed over
multiple lines with continuation characters (‘&amp;’).  Those lines are
combined by removing the ‘&amp;’ and the following newline character.  After
this processing the string is handed to LAMMPS for parsing and
executing.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Multi-line commands enabled by triple quotes will NOT work with
this function.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> – pointer to a previously created LAMMPS instance </p></li>
<li><p><strong>str</strong> – string with block of LAMMPS input commands </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Library_properties.html" class="btn btn-neutral float-right" title="1.1.3. System properties" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Library_create.html" class="btn btn-neutral float-left" title="1.1.1. Creating or deleting a LAMMPS object" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2003-2020 Sandia Corporation

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>