

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4.8. Utility functions &mdash; LAMMPS documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/lammps.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/lammps.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
  <script src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Commands" href="commands_list.html" />
    <link rel="prev" title="4.7.3. LAMMPS Input Base Class" href="Classes_input.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="Manual.html">
          

          
            
            <img src="_static/lammps-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="lammps_version">Version: <b>24 Dec 2020</b></div>
              <div class="lammps_release">git info: patch 24Dec2020-115-g2b8a0d310</div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Install.html">2. Install LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Build.html">3. Build LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Run_head.html">4. Run LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Commands.html">5. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Packages.html">6. Optional packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Speed.html">7. Accelerate performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Howto.html">8. Howto discussions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">9. Example scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tools.html">10. Auxiliary tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="Errors.html">11. Errors</a></li>
</ul>
<p class="caption"><span class="caption-text">Programmer Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Library.html">1. LAMMPS Library Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="Python_head.html">2. Use Python with LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Modify.html">3. Modifying &amp; extending LAMMPS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Developer.html">4. Information for Developers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Developer_org.html">4.1. Source files</a></li>
<li class="toctree-l2"><a class="reference internal" href="Developer_org.html#class-topology">4.2. Class topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="Developer_flow.html">4.3. How a timestep works</a></li>
<li class="toctree-l2"><a class="reference internal" href="Developer_write.html">4.4. Writing new styles</a></li>
<li class="toctree-l2"><a class="reference internal" href="Developer_notes.html">4.5. Notes for Developers and Code Maintainers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Developer_unittest.html">4.6. Adding tests for unit testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="Classes.html">4.7. C++ base classes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.8. Utility functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#i-o-with-status-check">4.8.1. I/O with status check</a></li>
<li class="toctree-l3"><a class="reference internal" href="#string-to-number-conversions-with-validity-check">4.8.2. String to number conversions with validity check</a></li>
<li class="toctree-l3"><a class="reference internal" href="#string-processing">4.8.3. String processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-and-path-functions">4.8.4. File and path functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#potential-file-functions">4.8.5. Potential file functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#argument-processing">4.8.6. Argument processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#convenience-functions">4.8.7. Convenience functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customized-standard-functions">4.8.8. Customized standard functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tokenizer-classes">4.9. Tokenizer classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#file-reader-classes">4.10. File reader classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#memory-pool-classes">4.11. Memory pool classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#eigensolver-functions">4.12. Eigensolver functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#communication-buffer-coding-with-ubuf">4.13. Communication buffer coding with <em>ubuf</em></a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Index</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="commands_list.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="fixes.html">Fixes</a></li>
<li class="toctree-l1"><a class="reference internal" href="computes.html">Computes</a></li>
<li class="toctree-l1"><a class="reference internal" href="pairs.html">Pair Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="bonds.html">Bond Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="angles.html">Angle Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="dihedrals.html">Dihedral Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="impropers.html">Improper Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="fix_modify_atc_commands.html">fix_modify AtC commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Bibliography.html">Bibliography</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="Manual.html">LAMMPS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="Manual.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="Developer.html"><span class="section-number">4. </span>Information for Developers</a> &raquo;</li>
        
      <li><span class="section-number">4.8. </span>Utility functions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
          <a href="http://lammps.sandia.gov">Website</a>
          <a href="Commands_all.html">Commands</a>
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="commands_list.html" class="btn btn-neutral float-right" title="Commands" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Classes_input.html" class="btn btn-neutral float-left" title="4.7.3. LAMMPS Input Base Class" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="utility-functions">
<h1><span class="section-number">4.8. </span>Utility functions<a class="headerlink" href="#utility-functions" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">utils</span></code> sub-namespace inside the <code class="docutils literal notranslate"><span class="pre">LAMMPS_NS</span></code> namespace provides
a collection of convenience functions and utilities that perform common
tasks that are required repeatedly throughout the LAMMPS code like
reading or writing to files with error checking or translation of
strings into specific types of numbers with checking for validity.  This
reduces redundant implementations and encourages consistent behavior.</p>
<div class="section" id="i-o-with-status-check">
<h2><span class="section-number">4.8.1. </span>I/O with status check<a class="headerlink" href="#i-o-with-status-check" title="Permalink to this headline">¶</a></h2>
<p>These are wrappers around the corresponding C library calls like
<code class="docutils literal notranslate"><span class="pre">fgets()</span></code> or <code class="docutils literal notranslate"><span class="pre">fread()</span></code>.  They will check if there were errors
on reading or an unexpected end-of-file state was reached.  In that
case, the functions will stop the calculation with an error message,
indicating the name of the problematic file, if possible.</p>
<hr class="docutils" />
<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils6sfgetsEPKciPciP4FILEPKcP5Error">
<span id="_CPPv3N9LAMMPS_NS5utils6sfgetsEPKciPciP4FILEPKcP5Error"></span><span id="_CPPv2N9LAMMPS_NS5utils6sfgetsEPKciPciP4FILEPKcP5Error"></span><span id="LAMMPS_NS::utils::sfgets__cCP.i.cP.i.FILEP.cCP.ErrorP"></span><span class="target" id="utils_8h_1a151f0249d5fa35b2f79f9fd411f0c61b"></span><span class="pre">void</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">sfgets</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">srcname</span></em>, <span class="pre">int</span> <em><span class="pre">srcline</span></em>, <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">s</span></em>, <span class="pre">int</span> <em><span class="pre">size</span></em>, <span class="pre">FILE</span> <span class="pre">*</span><em><span class="pre">fp</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">filename</span></em>, <span class="pre">Error</span> <span class="pre">*</span><em><span class="pre">error</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils6sfgetsEPKciPciP4FILEPKcP5Error" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>safe wrapper around fgets() which aborts on errors or EOF and prints a suitable error message to help debugging</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srcname</strong> – name of the calling source file (from FLERR macro) </p></li>
<li><p><strong>srcline</strong> – line in the calling source file (from FLERR macro) </p></li>
<li><p><strong>s</strong> – buffer for storing the result of fgets() </p></li>
<li><p><strong>size</strong> – size of buffer s (max number of bytes read by fgets()) </p></li>
<li><p><strong>fp</strong> – file pointer used by fgets() </p></li>
<li><p><strong>filename</strong> – file name associated with fp (may be a null pointer; then <a class="reference internal" href="Classes_lammps.html#classLAMMPS__NS_1_1LAMMPS"><span class="std std-ref">LAMMPS</span></a> will try to detect) </p></li>
<li><p><strong>error</strong> – pointer to Error class instance (for abort) </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils6sfreadEPKciPv6size_t6size_tP4FILEPKcP5Error">
<span id="_CPPv3N9LAMMPS_NS5utils6sfreadEPKciPv6size_t6size_tP4FILEPKcP5Error"></span><span id="_CPPv2N9LAMMPS_NS5utils6sfreadEPKciPv6size_t6size_tP4FILEPKcP5Error"></span><span id="LAMMPS_NS::utils::sfread__cCP.i.voidP.s.s.FILEP.cCP.ErrorP"></span><span class="target" id="utils_8h_1a5fc62aaa4658e16ec52523996d92af83"></span><span class="pre">void</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">sfread</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">srcname</span></em>, <span class="pre">int</span> <em><span class="pre">srcline</span></em>, <span class="pre">void</span> <span class="pre">*</span><em><span class="pre">s</span></em>, <span class="pre">size_t</span> <em><span class="pre">size</span></em>, <span class="pre">size_t</span> <em><span class="pre">num</span></em>, <span class="pre">FILE</span> <span class="pre">*</span><em><span class="pre">fp</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">filename</span></em>, <span class="pre">Error</span> <span class="pre">*</span><em><span class="pre">error</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils6sfreadEPKciPv6size_t6size_tP4FILEPKcP5Error" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>safe wrapper around fread() which aborts on errors or EOF and prints a suitable error message to help debugging</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srcname</strong> – name of the calling source file (from FLERR macro) </p></li>
<li><p><strong>srcline</strong> – line in the calling source file (from FLERR macro) </p></li>
<li><p><strong>s</strong> – buffer for storing the result of fread() </p></li>
<li><p><strong>size</strong> – size of data elements read by fread() </p></li>
<li><p><strong>num</strong> – number of data elements read by fread() </p></li>
<li><p><strong>fp</strong> – file pointer used by fread() </p></li>
<li><p><strong>filename</strong> – file name associated with fp (may be a null pointer; then <a class="reference internal" href="Classes_lammps.html#classLAMMPS__NS_1_1LAMMPS"><span class="std std-ref">LAMMPS</span></a> will try to detect) </p></li>
<li><p><strong>error</strong> – pointer to Error class instance (for abort) </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="string-to-number-conversions-with-validity-check">
<h2><span class="section-number">4.8.2. </span>String to number conversions with validity check<a class="headerlink" href="#string-to-number-conversions-with-validity-check" title="Permalink to this headline">¶</a></h2>
<p>These functions should be used to convert strings to numbers. They are
are strongly preferred over C library calls like <code class="docutils literal notranslate"><span class="pre">atoi()</span></code> or
<code class="docutils literal notranslate"><span class="pre">atof()</span></code> since they check if the <strong>entire</strong> provided string is a valid
(floating-point or integer) number, and will error out instead of
silently returning the result of a partial conversion or zero in cases
where the string is not a valid number.  This behavior allows to more
easily detect typos or issues when processing input files.</p>
<p>The <em>do_abort</em> flag should be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> in case  this function
is called only on a single MPI rank, as that will then trigger the
a call to <code class="docutils literal notranslate"><span class="pre">Error::one()</span></code> for errors instead of <code class="docutils literal notranslate"><span class="pre">Error::all()</span></code>
and avoids a “hanging” calculation when run in parallel.</p>
<p>Please also see <a class="reference internal" href="#_CPPv4N9LAMMPS_NS5utils10is_integerERKNSt6stringE" title="LAMMPS_NS::utils::is_integer"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">is_integer()</span></code></a>
and <a class="reference internal" href="#_CPPv4N9LAMMPS_NS5utils9is_doubleERKNSt6stringE" title="LAMMPS_NS::utils::is_double"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">is_double()</span></code></a> for testing
strings for compliance without conversion.</p>
<hr class="docutils" />
<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils7numericEPKciPKcbP6LAMMPS">
<span id="_CPPv3N9LAMMPS_NS5utils7numericEPKciPKcbP6LAMMPS"></span><span id="_CPPv2N9LAMMPS_NS5utils7numericEPKciPKcbP6LAMMPS"></span><span id="LAMMPS_NS::utils::numeric__cCP.i.cCP.b.LAMMPSP"></span><span class="target" id="utils_8h_1a503fd271ff7cf07725ad0b03b6d7f762"></span><span class="pre">double</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">numeric</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">file</span></em>, <span class="pre">int</span> <em><span class="pre">line</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">str</span></em>, <span class="pre">bool</span> <em><span class="pre">do_abort</span></em>, <a class="reference internal" href="Classes_lammps.html#_CPPv4N9LAMMPS_NS6LAMMPSE" title="LAMMPS_NS::LAMMPS"><span class="pre">LAMMPS</span></a> <span class="pre">*</span><em><span class="pre">lmp</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils7numericEPKciPKcbP6LAMMPS" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Convert a string to a floating point number while checking if it is a valid floating point or integer number</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – name of source file for error message </p></li>
<li><p><strong>line</strong> – line number in source file for error message </p></li>
<li><p><strong>str</strong> – string to be converted to number </p></li>
<li><p><strong>do_abort</strong> – determines whether to call Error::one() or Error::all() </p></li>
<li><p><strong>lmp</strong> – pointer to top-level <a class="reference internal" href="Classes_lammps.html#classLAMMPS__NS_1_1LAMMPS"><span class="std std-ref">LAMMPS</span></a> class instance </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>double precision floating point number </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils8inumericEPKciPKcbP6LAMMPS">
<span id="_CPPv3N9LAMMPS_NS5utils8inumericEPKciPKcbP6LAMMPS"></span><span id="_CPPv2N9LAMMPS_NS5utils8inumericEPKciPKcbP6LAMMPS"></span><span id="LAMMPS_NS::utils::inumeric__cCP.i.cCP.b.LAMMPSP"></span><span class="target" id="utils_8h_1a0fa1caaa9b4c196fb960712e6f2dfe5d"></span><span class="pre">int</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">inumeric</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">file</span></em>, <span class="pre">int</span> <em><span class="pre">line</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">str</span></em>, <span class="pre">bool</span> <em><span class="pre">do_abort</span></em>, <a class="reference internal" href="Classes_lammps.html#_CPPv4N9LAMMPS_NS6LAMMPSE" title="LAMMPS_NS::LAMMPS"><span class="pre">LAMMPS</span></a> <span class="pre">*</span><em><span class="pre">lmp</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils8inumericEPKciPKcbP6LAMMPS" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Convert a string to an integer number while checking if it is a valid integer number (regular int)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – name of source file for error message </p></li>
<li><p><strong>line</strong> – line number in source file for error message </p></li>
<li><p><strong>str</strong> – string to be converted to number </p></li>
<li><p><strong>do_abort</strong> – determines whether to call Error::one() or Error::all() </p></li>
<li><p><strong>lmp</strong> – pointer to top-level <a class="reference internal" href="Classes_lammps.html#classLAMMPS__NS_1_1LAMMPS"><span class="std std-ref">LAMMPS</span></a> class instance </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>integer number (regular int) </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils8bnumericEPKciPKcbP6LAMMPS">
<span id="_CPPv3N9LAMMPS_NS5utils8bnumericEPKciPKcbP6LAMMPS"></span><span id="_CPPv2N9LAMMPS_NS5utils8bnumericEPKciPKcbP6LAMMPS"></span><span id="LAMMPS_NS::utils::bnumeric__cCP.i.cCP.b.LAMMPSP"></span><span class="target" id="utils_8h_1af773a99c24a68d2055c9116ae1835f0a"></span><span class="pre">bigint</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">bnumeric</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">file</span></em>, <span class="pre">int</span> <em><span class="pre">line</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">str</span></em>, <span class="pre">bool</span> <em><span class="pre">do_abort</span></em>, <a class="reference internal" href="Classes_lammps.html#_CPPv4N9LAMMPS_NS6LAMMPSE" title="LAMMPS_NS::LAMMPS"><span class="pre">LAMMPS</span></a> <span class="pre">*</span><em><span class="pre">lmp</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils8bnumericEPKciPKcbP6LAMMPS" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Convert a string to an integer number while checking if it is a valid integer number (bigint)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – name of source file for error message </p></li>
<li><p><strong>line</strong> – line number in source file for error message </p></li>
<li><p><strong>str</strong> – string to be converted to number </p></li>
<li><p><strong>do_abort</strong> – determines whether to call Error::one() or Error::all() </p></li>
<li><p><strong>lmp</strong> – pointer to top-level <a class="reference internal" href="Classes_lammps.html#classLAMMPS__NS_1_1LAMMPS"><span class="std std-ref">LAMMPS</span></a> class instance </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>integer number (bigint) </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils8tnumericEPKciPKcbP6LAMMPS">
<span id="_CPPv3N9LAMMPS_NS5utils8tnumericEPKciPKcbP6LAMMPS"></span><span id="_CPPv2N9LAMMPS_NS5utils8tnumericEPKciPKcbP6LAMMPS"></span><span id="LAMMPS_NS::utils::tnumeric__cCP.i.cCP.b.LAMMPSP"></span><span class="target" id="utils_8h_1a4e8b8a6816b717518c30fd561e6e42fa"></span><span class="pre">tagint</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">tnumeric</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">file</span></em>, <span class="pre">int</span> <em><span class="pre">line</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">str</span></em>, <span class="pre">bool</span> <em><span class="pre">do_abort</span></em>, <a class="reference internal" href="Classes_lammps.html#_CPPv4N9LAMMPS_NS6LAMMPSE" title="LAMMPS_NS::LAMMPS"><span class="pre">LAMMPS</span></a> <span class="pre">*</span><em><span class="pre">lmp</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils8tnumericEPKciPKcbP6LAMMPS" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Convert a string to an integer number while checking if it is a valid integer number (tagint)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – name of source file for error message </p></li>
<li><p><strong>line</strong> – line number in source file for error message </p></li>
<li><p><strong>str</strong> – string to be converted to number </p></li>
<li><p><strong>do_abort</strong> – determines whether to call Error::one() or Error::all() </p></li>
<li><p><strong>lmp</strong> – pointer to top-level <a class="reference internal" href="Classes_lammps.html#classLAMMPS__NS_1_1LAMMPS"><span class="std std-ref">LAMMPS</span></a> class instance </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>integer number (tagint) </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="string-processing">
<h2><span class="section-number">4.8.3. </span>String processing<a class="headerlink" href="#string-processing" title="Permalink to this headline">¶</a></h2>
<p>The following are functions to help with processing strings
and parsing files or arguments.</p>
<hr class="docutils" />
<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils4trimERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils4trimERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils4trimERKNSt6stringE"></span><span id="LAMMPS_NS::utils::trim__ssCR"></span><span class="target" id="utils_8h_1a2eaed9f7998793904b0953fe0d9bbf6a"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">trim</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">line</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils4trimERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Trim leading and trailing whitespace. Like TRIM() in Fortran.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> – string that should be trimmed </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>new string without whitespace (string) </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils12trim_commentERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils12trim_commentERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils12trim_commentERKNSt6stringE"></span><span id="LAMMPS_NS::utils::trim_comment__ssCR"></span><span class="target" id="utils_8h_1ae197fb8181a875095b3dbc0f1e2cdf2d"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">trim_comment</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">line</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils12trim_commentERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return string with anything from ‘#’ onward removed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> – string that should be trimmed </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>new string without comment (string) </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils11count_wordsEPKc">
<span id="_CPPv3N9LAMMPS_NS5utils11count_wordsEPKc"></span><span id="_CPPv2N9LAMMPS_NS5utils11count_wordsEPKc"></span><span id="LAMMPS_NS::utils::count_words__cCP"></span><span class="target" id="utils_8h_1a8cda2fde7eb5a65ed3f071ed17f42054"></span><span class="pre">size_t</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">count_words</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils11count_wordsEPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Count words in C-string, ignore any whitespace matching ” \t\r\n\f”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> – string that should be searched </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of words found </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils11count_wordsERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils11count_wordsERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils11count_wordsERKNSt6stringE"></span><span id="LAMMPS_NS::utils::count_words__ssCR"></span><span class="target" id="utils_8h_1ab469ccad212a812ee2f67727307509ee"></span><span class="pre">size_t</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">count_words</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils11count_wordsERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Count words in string, ignore any whitespace matching ” \t\r\n\f”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> – string that should be searched </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of words found </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils11count_wordsERKNSt6stringERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils11count_wordsERKNSt6stringERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils11count_wordsERKNSt6stringERKNSt6stringE"></span><span id="LAMMPS_NS::utils::count_words__ssCR.ssCR"></span><span class="target" id="utils_8h_1a31175af2f2305fea6e26a2f780e0a491"></span><span class="pre">size_t</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">count_words</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">text</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">separators</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils11count_wordsERKNSt6stringERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Count words in string with custom choice of separating characters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> – string that should be searched </p></li>
<li><p><strong>separators</strong> – string containing characters that will be treated as whitespace </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of words found </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils20trim_and_count_wordsERKNSt6stringERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils20trim_and_count_wordsERKNSt6stringERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils20trim_and_count_wordsERKNSt6stringERKNSt6stringE"></span><span id="LAMMPS_NS::utils::trim_and_count_words__ssCR.ssCR"></span><span class="target" id="utils_8h_1af92e41728a60e9d949fa37e68f132178"></span><span class="pre">size_t</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">trim_and_count_words</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">text</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">separators</span></em> <span class="pre">=</span> <span class="pre">&quot;</span> <span class="pre">\t\r\n\f&quot;</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils20trim_and_count_wordsERKNSt6stringERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Count words in a single line, trim anything from ‘#’ onward</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> – string that should be trimmed and searched </p></li>
<li><p><strong>separators</strong> – string containing characters that will be treated as whitespace </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of words found </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils11split_wordsERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils11split_wordsERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils11split_wordsERKNSt6stringE"></span><span id="LAMMPS_NS::utils::split_words__ssCR"></span><span class="target" id="utils_8h_1ac6b258d9949ba630b8383fa857f9bbb9"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">vector</span><span class="pre">&lt;</span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span><span class="pre">&gt;</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">split_words</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils11split_wordsERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Take text and split into non-whitespace words.</p>
<p>This can handle strings with single and double quotes, escaped quotes, and escaped codes within quotes, but due to using an STL container and STL strings is rather slow because of making copies. Designed for parsing command lines and similar text and not for time critical processing. Use a tokenizer class for that.</p>
<p><p><dl class="simple">
<dt><em>See also</em></dt><dd><p><a class="reference internal" href="#_CPPv4N9LAMMPS_NS9TokenizerE" title="LAMMPS_NS::Tokenizer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a>, <a class="reference internal" href="#_CPPv4N9LAMMPS_NS14ValueTokenizerE" title="LAMMPS_NS::ValueTokenizer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ValueTokenizer</span></code></a></p>
</dd>
</dl>
</p>
 <div class="highlight-none notranslate"><div class="highlight"><pre><span></span>   \param text string that should be split
   \return STL vector with the words
</pre></div>
</div>
 </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils8strmatchERKNSt6stringERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils8strmatchERKNSt6stringERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils8strmatchERKNSt6stringERKNSt6stringE"></span><span id="LAMMPS_NS::utils::strmatch__ssCR.ssCR"></span><span class="target" id="utils_8h_1a3a2003eb8f17075d799ecf645e4f2c30"></span><span class="pre">bool</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">strmatch</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">text</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">pattern</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils8strmatchERKNSt6stringERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Match text against a simplified regex pattern</p>
<p>
More flexible and specific matching of a string against a pattern. This function is supposed to be a more safe, more specific and simple to use API to find pattern matches. The purpose is to replace uses of either strncmp() or strstr() in the code base to find sub-strings safely. With strncmp() finding prefixes, the number of characters to match must be counted, which can lead to errors, while using “^pattern” will do the same with less problems. Matching for suffixes using strstr() is not as specific as ‘pattern$’, and complex matches, e.g. “^rigid.*\/small.*”, to match all small body optimized rigid fixes require only one test.</p>
<p>The use of std::string arguments allows for simple concatenation even with char * type variables. Example: utils::strmatch(text, std::string(“^”) + charptr) </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> – the text to be matched against the pattern </p></li>
<li><p><strong>pattern</strong> – the search pattern, which may contain regexp markers </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>true if the pattern matches, false if not</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils10is_integerERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils10is_integerERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils10is_integerERKNSt6stringE"></span><span id="LAMMPS_NS::utils::is_integer__ssCR"></span><span class="target" id="utils_8h_1a66b3c703e53c70f60ba745a557cace67"></span><span class="pre">bool</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">is_integer</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils10is_integerERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Check if string can be converted to valid integer</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> – string that should be checked </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>true, if string contains valid a integer, false otherwise </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils9is_doubleERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils9is_doubleERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils9is_doubleERKNSt6stringE"></span><span id="LAMMPS_NS::utils::is_double__ssCR"></span><span class="target" id="utils_8h_1a3f130082bbb981e0253f32bc46c1b3b3"></span><span class="pre">bool</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">is_double</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils9is_doubleERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Check if string can be converted to valid floating-point number</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> – string that should be checked </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>true, if string contains valid number, false otherwise </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="file-and-path-functions">
<h2><span class="section-number">4.8.4. </span>File and path functions<a class="headerlink" href="#file-and-path-functions" title="Permalink to this headline">¶</a></h2>
<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils9guesspathEPciP4FILE">
<span id="_CPPv3N9LAMMPS_NS5utils9guesspathEPciP4FILE"></span><span id="_CPPv2N9LAMMPS_NS5utils9guesspathEPciP4FILE"></span><span id="LAMMPS_NS::utils::guesspath__cP.i.FILEP"></span><span class="target" id="utils_8h_1ab0c198e2f93ff69b3fc01b00a00e7cb2"></span><em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">guesspath</span></code><span class="sig-paren">(</span><span class="pre">char</span> <span class="pre">*</span><em><span class="pre">buf</span></em>, <span class="pre">int</span> <em><span class="pre">len</span></em>, <span class="pre">FILE</span> <span class="pre">*</span><em><span class="pre">fp</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils9guesspathEPciP4FILE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Try to detect pathname from FILE pointer.</p>
<p>Currently only supported on Linux, otherwise will report “(unknown)”.</p>
<p>
On Linux the folder /proc/self/fd holds symbolic links to the actual pathnames associated with each open file descriptor of the current process.</p>
<p>This function is used to provide a filename with error messages in functions where the filename is not passed as an argument, but the FILE * pointer. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> – storage buffer for pathname. output will be truncated if not large enough </p></li>
<li><p><strong>len</strong> – size of storage buffer. output will be truncated to this length - 1 </p></li>
<li><p><strong>fp</strong> – FILE pointer struct from STDIO library for which we want to detect the name </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>pointer to the storage buffer, i.e. buf</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils13path_basenameERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils13path_basenameERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils13path_basenameERKNSt6stringE"></span><span id="LAMMPS_NS::utils::path_basename__ssCR"></span><span class="target" id="utils_8h_1af571f031125be18774c73496bf428f1e"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">path_basename</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils13path_basenameERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Strip off leading part of path, return just the filename</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – file path </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>file name </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils9path_joinERKNSt6stringERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils9path_joinERKNSt6stringERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils9path_joinERKNSt6stringERKNSt6stringE"></span><span id="LAMMPS_NS::utils::path_join__ssCR.ssCR"></span><span class="target" id="utils_8h_1afdc0fd0cefb9e5241e4ba20852877f4e"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">path_join</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">a</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">b</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils9path_joinERKNSt6stringERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Join two pathname segments</p>
<p>This uses the forward slash ‘/’ character unless <a class="reference internal" href="Classes_lammps.html#classLAMMPS__NS_1_1LAMMPS"><span class="std std-ref">LAMMPS</span></a> is compiled for Windows where it used the equivalent backward slash ‘'.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> – first path </p></li>
<li><p><strong>b</strong> – second path </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>combined path </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils16file_is_readableERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils16file_is_readableERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils16file_is_readableERKNSt6stringE"></span><span id="LAMMPS_NS::utils::file_is_readable__ssCR"></span><span class="target" id="utils_8h_1a9b6a15dfd00fe9eebeb84f092402b6b1"></span><span class="pre">bool</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">file_is_readable</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils16file_is_readableERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Check if file exists and is readable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – file path </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>true if file exists and is readable </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="potential-file-functions">
<h2><span class="section-number">4.8.5. </span>Potential file functions<a class="headerlink" href="#potential-file-functions" title="Permalink to this headline">¶</a></h2>
<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils23get_potential_file_pathERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils23get_potential_file_pathERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils23get_potential_file_pathERKNSt6stringE"></span><span id="LAMMPS_NS::utils::get_potential_file_path__ssCR"></span><span class="target" id="utils_8h_1a54601c14224556c45ed863cb95e8d49c"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">get_potential_file_path</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils23get_potential_file_pathERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Determine full path of potential file. If file is not found in current directory, search directories listed in LAMMPS_POTENTIALS environment variable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – file path </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>full path to potential file </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils18get_potential_dateERKNSt6stringERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils18get_potential_dateERKNSt6stringERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils18get_potential_dateERKNSt6stringERKNSt6stringE"></span><span id="LAMMPS_NS::utils::get_potential_date__ssCR.ssCR"></span><span class="target" id="utils_8h_1a86fd64c9c2c2183daada07c001e91392"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">get_potential_date</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">path</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">potential_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils18get_potential_dateERKNSt6stringERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read potential file and return DATE field if it is present</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – file path </p></li>
<li><p><strong>potential_name</strong> – name of potential that is being read </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DATE field if present </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils19get_potential_unitsERKNSt6stringERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils19get_potential_unitsERKNSt6stringERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils19get_potential_unitsERKNSt6stringERKNSt6stringE"></span><span id="LAMMPS_NS::utils::get_potential_units__ssCR.ssCR"></span><span class="target" id="utils_8h_1ab8b096aefd75e4cef0162f113b800c2e"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">get_potential_units</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">path</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">potential_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils19get_potential_unitsERKNSt6stringERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read potential file and return UNITS field if it is present</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – file path </p></li>
<li><p><strong>potential_name</strong> – name of potential that is being read </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>UNITS field if present </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils25get_supported_conversionsEKi">
<span id="_CPPv3N9LAMMPS_NS5utils25get_supported_conversionsEKi"></span><span id="_CPPv2N9LAMMPS_NS5utils25get_supported_conversionsEKi"></span><span id="LAMMPS_NS::utils::get_supported_conversions__iC"></span><span class="target" id="utils_8h_1a4d70c1d4e44dad6d82bb7fb643adb095"></span><span class="pre">int</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">get_supported_conversions</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">int</span> <em><span class="pre">property</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils25get_supported_conversionsEKi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return bitmask of available conversion factors for a given property</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>property</strong> – property to be converted </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bitmask indicating available conversions </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils21get_conversion_factorEKiKi">
<span id="_CPPv3N9LAMMPS_NS5utils21get_conversion_factorEKiKi"></span><span id="_CPPv2N9LAMMPS_NS5utils21get_conversion_factorEKiKi"></span><span id="LAMMPS_NS::utils::get_conversion_factor__iC.iC"></span><span class="target" id="utils_8h_1ae069d34c47dc4eeb168de963e592f5ed"></span><span class="pre">double</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">get_conversion_factor</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">int</span> <em><span class="pre">property</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">int</span> <em><span class="pre">conversion</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils21get_conversion_factorEKiKi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return unit conversion factor for given property and selected from/to units</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>property</strong> – property to be converted </p></li>
<li><p><strong>conversion</strong> – constant indicating the conversion </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>conversion factor </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils14open_potentialERKNSt6stringEP6LAMMPSPi">
<span id="_CPPv3N9LAMMPS_NS5utils14open_potentialERKNSt6stringEP6LAMMPSPi"></span><span id="_CPPv2N9LAMMPS_NS5utils14open_potentialERKNSt6stringEP6LAMMPSPi"></span><span id="LAMMPS_NS::utils::open_potential__ssCR.LAMMPSP.iP"></span><span class="target" id="utils_8h_1a1b92528e9bbdff202464fded75539b84"></span><span class="pre">FILE</span> <span class="pre">*</span><code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">open_potential</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">name</span></em>, <a class="reference internal" href="Classes_lammps.html#_CPPv4N9LAMMPS_NS6LAMMPSE" title="LAMMPS_NS::LAMMPS"><span class="pre">LAMMPS</span></a> <span class="pre">*</span><em><span class="pre">lmp</span></em>, <span class="pre">int</span> <span class="pre">*</span><em><span class="pre">auto_convert</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils14open_potentialERKNSt6stringEP6LAMMPSPi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Open a potential file as specified by <em>name</em></p>
<p>If opening the file directly fails, the function will search for it in the list of folder pointed to by the environment variable <code class="docutils literal notranslate"><span class="pre">LAMMPS_POTENTIALS</span></code> (if it is set).</p>
<p>If the potential file has a <code class="docutils literal notranslate"><span class="pre">UNITS</span></code> tag in the first line, the tag’s value is compared to the current unit style setting. The behavior of the function then depends on the value of the <em>auto_convert</em> parameter. If it is a null pointer, then the unit values must match or else the open will fail with an error. Otherwise the bitmask that <em>auto_convert</em> points to is used check for compatibility with possible automatic conversions by the calling function. If compatible, the bitmask is set to the required conversion or <code class="docutils literal notranslate"><span class="pre">utils::NOCONVERT</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – file- or pathname of the potential file </p></li>
<li><p><strong>lmp</strong> – pointer to top-level <a class="reference internal" href="Classes_lammps.html#classLAMMPS__NS_1_1LAMMPS"><span class="std std-ref">LAMMPS</span></a> class instance </p></li>
<li><p><strong>auto_convert</strong> – pointer to unit conversion bitmask or <code class="docutils literal notranslate"><span class="pre">nullptr</span></code> </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>FILE pointer of the opened potential file or <code class="docutils literal notranslate"><span class="pre">nullptr</span></code> </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="argument-processing">
<h2><span class="section-number">4.8.6. </span>Argument processing<a class="headerlink" href="#argument-processing" title="Permalink to this headline">¶</a></h2>
<dl class="cpp function">
<dt id="_CPPv4I0EN9LAMMPS_NS5utils6boundsEvPKciRKNSt6stringE6bigint6bigintR4TYPER4TYPEP5Error">
<span id="_CPPv3I0EN9LAMMPS_NS5utils6boundsEPKciRKNSt6stringE6bigint6bigintR4TYPER4TYPEP5Error"></span><span id="_CPPv2I0EN9LAMMPS_NS5utils6boundsEPKciRKNSt6stringE6bigint6bigintR4TYPER4TYPEP5Error"></span><span class="pre">template&lt;</span><span class="pre">typename</span> <code class="sig-name descname"><span class="pre">TYPE</span></code><span class="pre">&gt;</span><br /><span class="target" id="utils_8h_1aec32e4cae8ced7029e6f162a7442bcf9"></span><span class="pre">void</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">bounds</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">file</span></em>, <span class="pre">int</span> <em><span class="pre">line</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">str</span></em>, <span class="pre">bigint</span> <em><span class="pre">nmin</span></em>, <span class="pre">bigint</span> <em><span class="pre">nmax</span></em>, <a class="reference internal" href="#_CPPv4I0EN9LAMMPS_NS5utils6boundsEvPKciRKNSt6stringE6bigint6bigintR4TYPER4TYPEP5Error" title="LAMMPS_NS::utils::bounds::TYPE"><span class="pre">TYPE</span></a> <span class="pre">&amp;</span><em><span class="pre">nlo</span></em>, <a class="reference internal" href="#_CPPv4I0EN9LAMMPS_NS5utils6boundsEvPKciRKNSt6stringE6bigint6bigintR4TYPER4TYPEP5Error" title="LAMMPS_NS::utils::bounds::TYPE"><span class="pre">TYPE</span></a> <span class="pre">&amp;</span><em><span class="pre">nhi</span></em>, <span class="pre">Error</span> <span class="pre">*</span><em><span class="pre">error</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I0EN9LAMMPS_NS5utils6boundsEvPKciRKNSt6stringE6bigint6bigintR4TYPER4TYPEP5Error" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Compute index bounds derived from a string with a possible wildcard</p>
<p>This functions processes the string in <em>str</em> and set the values of <em>nlo</em> and <em>nhi</em> according to the following five cases:</p>
<p><ul class="simple">
<li><p>a single number, i: nlo = i; nhi = i;</p></li>
<li><p>a single asterisk, *: nlo = nmin; nhi = nmax;</p></li>
<li><p>a single number followed by an asterisk, i*: nlo = i; nhi = nmax;</p></li>
<li><p>a single asterisk followed by a number, *i: nlo = nmin; nhi = i;</p></li>
<li><p>two numbers with an asterisk in between. i*j: nlo = i; nhi = j;</p></li>
</ul>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – name of source file for error message </p></li>
<li><p><strong>line</strong> – line number in source file for error message </p></li>
<li><p><strong>str</strong> – string to be processed </p></li>
<li><p><strong>nmin</strong> – smallest possible lower bound </p></li>
<li><p><strong>nmax</strong> – largest allowed upper bound </p></li>
<li><p><strong>nlo</strong> – lower bound </p></li>
<li><p><strong>nhi</strong> – upper bound </p></li>
<li><p><strong>error</strong> – pointer to Error class for out-of-bounds messages </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils11expand_argsEPKciiPPciRPPcP6LAMMPS">
<span id="_CPPv3N9LAMMPS_NS5utils11expand_argsEPKciiPPciRPPcP6LAMMPS"></span><span id="_CPPv2N9LAMMPS_NS5utils11expand_argsEPKciiPPciRPPcP6LAMMPS"></span><span id="LAMMPS_NS::utils::expand_args__cCP.i.i.cPP.i.cPPR.LAMMPSP"></span><span class="target" id="utils_8h_1a4672127156cfeac7cfb3376dfb7f6ca9"></span><span class="pre">int</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">expand_args</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><em><span class="pre">file</span></em>, <span class="pre">int</span> <em><span class="pre">line</span></em>, <span class="pre">int</span> <em><span class="pre">narg</span></em>, <span class="pre">char</span> <span class="pre">*</span><span class="pre">*</span><em><span class="pre">arg</span></em>, <span class="pre">int</span> <em><span class="pre">mode</span></em>, <span class="pre">char</span> <span class="pre">*</span><span class="pre">*</span><span class="pre">&amp;</span><em><span class="pre">earg</span></em>, <a class="reference internal" href="Classes_lammps.html#_CPPv4N9LAMMPS_NS6LAMMPSE" title="LAMMPS_NS::LAMMPS"><span class="pre">LAMMPS</span></a> <span class="pre">*</span><em><span class="pre">lmp</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils11expand_argsEPKciiPPciRPPcP6LAMMPS" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Expand list of arguments when containing fix/compute wildcards</p>
<p>This function searches the list of arguments in <em>arg</em> for strings of the kind c_ID[*] or f_ID[*] referring to computes or fixes. Any such strings are replaced by one or more strings with the ‘*’ character replaced by the corresponding possible numbers as determined from the fix or compute instance. Other strings are just copied. If the <em>mode</em> parameter is set to 0, expand global vectors, but not global arrays; if it is set to 1, expand global arrays (by column) but not global vectors.</p>
<p>If any expansion happens, the earg list and all its strings are new allocations and must be freed explicitly by the caller. Otherwise arg and earg will point to the same address and no explicit de-allocation is needed by the caller.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – name of source file for error message </p></li>
<li><p><strong>line</strong> – line number in source file for error message </p></li>
<li><p><strong>narg</strong> – number of arguments in current list </p></li>
<li><p><strong>arg</strong> – argument list, possibly containing wildcards </p></li>
<li><p><strong>mode</strong> – select between global vectors(=0) and arrays (=1) </p></li>
<li><p><strong>earg</strong> – new argument list with wildcards expanded </p></li>
<li><p><strong>lmp</strong> – pointer to top-level <a class="reference internal" href="Classes_lammps.html#classLAMMPS__NS_1_1LAMMPS"><span class="std std-ref">LAMMPS</span></a> class instance </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of arguments in expanded list </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="convenience-functions">
<h2><span class="section-number">4.8.7. </span>Convenience functions<a class="headerlink" href="#convenience-functions" title="Permalink to this headline">¶</a></h2>
<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils7logmesgEP6LAMMPSRKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils7logmesgEP6LAMMPSRKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils7logmesgEP6LAMMPSRKNSt6stringE"></span><span id="LAMMPS_NS::utils::logmesg__LAMMPSP.ssCR"></span><span class="target" id="utils_8h_1a0b5a7272e51011310cc877ba444f9ac7"></span><span class="pre">void</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">logmesg</span></code><span class="sig-paren">(</span><a class="reference internal" href="Classes_lammps.html#_CPPv4N9LAMMPS_NS6LAMMPSE" title="LAMMPS_NS::LAMMPS"><span class="pre">LAMMPS</span></a> <span class="pre">*</span><em><span class="pre">lmp</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">mesg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils7logmesgEP6LAMMPSRKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Send message to screen and logfile, if available</p>
<p>
This function simplifies the repetitive task of outputting some message to both the screen and/or the log file. In combination with using fmt::format(), which returns the formatted text in a std::string() instance, this can be used to reduce operations previously requiring several lines of code to a single statement. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lmp</strong> – pointer to <a class="reference internal" href="Classes_lammps.html#classLAMMPS__NS_1_1LAMMPS"><span class="std std-ref">LAMMPS</span></a> class instance </p></li>
<li><p><strong>mesg</strong> – message to be printed</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils11getsyserrorEv">
<span id="_CPPv3N9LAMMPS_NS5utils11getsyserrorEv"></span><span id="_CPPv2N9LAMMPS_NS5utils11getsyserrorEv"></span><span id="LAMMPS_NS::utils::getsyserror"></span><span class="target" id="utils_8h_1a59872d3df515856d461cc81f8de6777e"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">getsyserror</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils11getsyserrorEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>return a string representing the current system error status</p>
<p>This is a wrapper around calling strerror(errno).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>error string </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils24check_packages_for_styleERKNSt6stringERKNSt6stringEP6LAMMPS">
<span id="_CPPv3N9LAMMPS_NS5utils24check_packages_for_styleERKNSt6stringERKNSt6stringEP6LAMMPS"></span><span id="_CPPv2N9LAMMPS_NS5utils24check_packages_for_styleERKNSt6stringERKNSt6stringEP6LAMMPS"></span><span id="LAMMPS_NS::utils::check_packages_for_style__ssCR.ssCR.LAMMPSP"></span><span class="target" id="utils_8h_1a7958600997ce9aecc9c589d6a340b93b"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">check_packages_for_style</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">style</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">name</span></em>, <a class="reference internal" href="Classes_lammps.html#_CPPv4N9LAMMPS_NS6LAMMPSE" title="LAMMPS_NS::LAMMPS"><span class="pre">LAMMPS</span></a> <span class="pre">*</span><em><span class="pre">lmp</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils24check_packages_for_styleERKNSt6stringERKNSt6stringEP6LAMMPS" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Report if a requested style is in a package or may have a typo</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>style</strong> – type of style that is to be checked for </p></li>
<li><p><strong>name</strong> – name of style that was not found </p></li>
<li><p><strong>lmp</strong> – pointer to top-level <a class="reference internal" href="Classes_lammps.html#classLAMMPS__NS_1_1LAMMPS"><span class="std std-ref">LAMMPS</span></a> class instance </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string usable for error messages </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils16timespec2secondsERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils16timespec2secondsERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils16timespec2secondsERKNSt6stringE"></span><span id="LAMMPS_NS::utils::timespec2seconds__ssCR"></span><span class="target" id="utils_8h_1afd22548fe9c6d4570ffcde59947a1764"></span><span class="pre">double</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">timespec2seconds</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">timespec</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils16timespec2secondsERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Convert a time string to seconds</p>
<p>The strings “off” and “unlimited” result in -1</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timespec</strong> – a string in the following format: ([[HH:]MM:]SS) </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>total in seconds </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils8date2numERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS5utils8date2numERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS5utils8date2numERKNSt6stringE"></span><span id="LAMMPS_NS::utils::date2num__ssCR"></span><span class="target" id="utils_8h_1af07ce9a5537cbc035845686e894f3491"></span><span class="pre">int</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">date2num</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">date</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils8date2numERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Convert a <a class="reference internal" href="Classes_lammps.html#classLAMMPS__NS_1_1LAMMPS"><span class="std std-ref">LAMMPS</span></a> version date to a number</p>
<p>This will generate a number YYYYMMDD from a date string (with or without blanks) that is suitable for numerical comparisons, i.e. later dates will generate a larger number.</p>
<p>The day may or may not have a leading zero, the month is identified by the first 3 letters (so there may be more) and the year may be 2 or 4 digits (the missing 2 digits will be assumed as 20. That is 04 corresponds to 2004).</p>
<p>No check is made whether the date is valid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>date</strong> – string in the format (Day Month Year) </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>date code </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="customized-standard-functions">
<h2><span class="section-number">4.8.8. </span>Customized standard functions<a class="headerlink" href="#customized-standard-functions" title="Permalink to this headline">¶</a></h2>
<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS5utils10merge_sortEPiiPvPFiiiPvE">
<span id="_CPPv3N9LAMMPS_NS5utils10merge_sortEPiiPvPFiiiPvE"></span><span id="_CPPv2N9LAMMPS_NS5utils10merge_sortEPiiPvPFiiiPvE"></span><span class="target" id="utils_8h_1af677fa53e7e5713dfb0fa6d6c3c6f81e"></span><span class="pre">void</span> <code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><span class="pre">::</span><span class="pre">utils</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">merge_sort</span></code><span class="sig-paren">(</span><span class="pre">int</span> <span class="pre">*</span><em><span class="pre">index</span></em>, <span class="pre">int</span> <em><span class="pre">num</span></em>, <span class="pre">void</span> <span class="pre">*</span><em><span class="pre">ptr</span></em>, <span class="pre">int</span> <span class="pre">(</span><span class="pre">*</span><em><span class="pre">comp</span></em><span class="pre">)</span><span class="sig-paren">(</span><span class="pre">int</span>, <span class="pre">int</span>, <span class="pre">void</span><span class="pre">*</span><span class="sig-paren">)</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS5utils10merge_sortEPiiPvPFiiiPvE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Custom merge sort implementation</p>
<p>This function provides a custom upward hybrid merge sort implementation with support to pass an opaque pointer to the comparison function, e.g. for access to class members. This avoids having to use global variables. For improved performance, it uses an in-place insertion sort on initial chunks of up to 64 elements and switches to merge sort from then on.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> – Array with indices to be sorted </p></li>
<li><p><strong>num</strong> – Length of the index array </p></li>
<li><p><strong>ptr</strong> – Pointer to opaque object passed to comparison function </p></li>
<li><p><strong>comp</strong> – Pointer to comparison function </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="tokenizer-classes">
<h1><span class="section-number">4.9. </span>Tokenizer classes<a class="headerlink" href="#tokenizer-classes" title="Permalink to this headline">¶</a></h1>
<p>The purpose of the tokenizer classes is to simplify the recurring task
of breaking lines of text down into words and/or numbers.
Traditionally, LAMMPS code would be using the <code class="docutils literal notranslate"><span class="pre">strtok()</span></code> function from
the C library for that purpose, but that function has two significant
disadvantages: 1) it cannot be used concurrently from different LAMMPS
instances since it stores its status in a global variable and 2) it
modifies the string that it is processing.  These classes were
implemented to avoid both of these issues and also to reduce the amount
of code that needs to be written.</p>
<p>The basic procedure is to create an instance of the tokenizer class with
the string to be processed as an argument and then do a loop until all
available tokens are read.  The constructor has a default set of
separator characters, but that can be overridden. The default separators
are all “whitespace” characters, i.e. the space character, the tabulator
character, the carriage return character, the linefeed character, and
the form feed character.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Tokenizer class example listing entries of the PATH environment variable</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;tokenizer.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">LAMMPS_NS</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">path</span> <span class="o">=</span> <span class="n">getenv</span><span class="p">(</span><span class="s">&quot;PATH&quot;</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">path</span> <span class="o">!=</span> <span class="k">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Tokenizer</span> <span class="n">p</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">has_next</span><span class="p">())</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Entry: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">p</span><span class="p">.</span><span class="n">next</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Most tokenizer operations cannot fail except for
<a class="reference internal" href="#_CPPv4N9LAMMPS_NS9Tokenizer4nextEv" title="LAMMPS_NS::Tokenizer::next"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">LAMMPS_NS::Tokenizer::next()</span></code></a> (when used without first
checking with <a class="reference internal" href="#_CPPv4NK9LAMMPS_NS9Tokenizer8has_nextEv" title="LAMMPS_NS::Tokenizer::has_next"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">LAMMPS_NS::Tokenizer::has_next()</span></code></a>) and
<a class="reference internal" href="#_CPPv4N9LAMMPS_NS9Tokenizer4skipEi" title="LAMMPS_NS::Tokenizer::skip"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">LAMMPS_NS::Tokenizer::skip()</span></code></a>.  In case of failure, the class
will throw an exception, so you may need to wrap the code using the
tokenizer into a <code class="docutils literal notranslate"><span class="pre">try</span></code> / <code class="docutils literal notranslate"><span class="pre">catch</span></code> block to handle errors.  The
<a class="reference internal" href="#_CPPv4N9LAMMPS_NS14ValueTokenizerE" title="LAMMPS_NS::ValueTokenizer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">LAMMPS_NS::ValueTokenizer</span></code></a> class may also throw an exception
when a (type of) number is requested as next token that is not
compatible with the string representing the next word.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">ValueTokenizer class example with exception handling</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;tokenizer.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;cstdlib&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">LAMMPS_NS</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">text</span> <span class="o">=</span> <span class="s">&quot;1 2 3 4 5 20.0 21 twentytwo 2.3&quot;</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">num1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="n">num2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="n">num3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="n">num4</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="n">ValueTokenizer</span> <span class="n">t</span><span class="p">(</span><span class="n">text</span><span class="p">);</span>
    <span class="c1">// read 4 doubles after skipping over 5 numbers</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="n">t</span><span class="p">.</span><span class="n">skip</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
        <span class="n">num1</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">next_double</span><span class="p">();</span>
        <span class="n">num2</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">next_double</span><span class="p">();</span>
        <span class="n">num3</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">next_double</span><span class="p">();</span>
        <span class="n">num4</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">next_double</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">TokenizerException</span> <span class="o">&amp;</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Reading numbers failed: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Values: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">num1</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">num2</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">num3</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">num4</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>This code example should produce the following output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Reading numbers failed: Not a valid floating-point number: &#39;twentytwo&#39;
Values: 20 21 0 0
</pre></div>
</div>
<hr class="docutils" />
<dl class="cpp class">
<dt id="_CPPv4N9LAMMPS_NS9TokenizerE">
<span id="_CPPv3N9LAMMPS_NS9TokenizerE"></span><span id="_CPPv2N9LAMMPS_NS9TokenizerE"></span><span id="LAMMPS_NS::Tokenizer"></span><span class="target" id="classLAMMPS__NS_1_1Tokenizer"></span><em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">Tokenizer</span></code><a class="headerlink" href="#_CPPv4N9LAMMPS_NS9TokenizerE" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS9Tokenizer9TokenizerERKNSt6stringERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS9Tokenizer9TokenizerERKNSt6stringERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS9Tokenizer9TokenizerERKNSt6stringERKNSt6stringE"></span><span id="LAMMPS_NS::Tokenizer::Tokenizer__ssCR.ssCR"></span><span class="target" id="classLAMMPS__NS_1_1Tokenizer_1a9cc04453cbea9f23710ddc0614897774"></span><code class="sig-name descname"><span class="pre">Tokenizer</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">str</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">separators</span></em> <span class="pre">=</span> <span class="pre">TOKENIZER_DEFAULT_SEPARATORS</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS9Tokenizer9TokenizerERKNSt6stringERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Class for splitting text into words</p>
<p>This tokenizer will break down a string into sub-strings (i.e words) separated by the given separator characters.</p>
<p><dl class="simple">
<dt><em>See also</em></dt><dd><p><a class="reference internal" href="#_CPPv4N9LAMMPS_NS14ValueTokenizerE" title="LAMMPS_NS::ValueTokenizer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ValueTokenizer</span></code></a>, <a class="reference internal" href="#_CPPv4N9LAMMPS_NS5utils11split_wordsERKNSt6stringE" title="LAMMPS_NS::utils::split_words"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">utils::split_words()</span></code></a></p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>str</strong> – string to be processed </p></li>
<li><p><strong>separators</strong> – string with separator characters (default: ” \t\r\n\f”) </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS9Tokenizer5resetEv">
<span id="_CPPv3N9LAMMPS_NS9Tokenizer5resetEv"></span><span id="_CPPv2N9LAMMPS_NS9Tokenizer5resetEv"></span><span id="LAMMPS_NS::Tokenizer::reset"></span><span class="target" id="classLAMMPS__NS_1_1Tokenizer_1ad20897c5c8bd47f5d4005989bead0e55"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">reset</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS9Tokenizer5resetEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Re-position the tokenizer state to the first word, i.e. the first non-separator character </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS9Tokenizer4skipEi">
<span id="_CPPv3N9LAMMPS_NS9Tokenizer4skipEi"></span><span id="_CPPv2N9LAMMPS_NS9Tokenizer4skipEi"></span><span id="LAMMPS_NS::Tokenizer::skip__i"></span><span class="target" id="classLAMMPS__NS_1_1Tokenizer_1a22e04fd90a8da8fbaa968a171d19c6f8"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">skip</span></code><span class="sig-paren">(</span><span class="pre">int</span> <em><span class="pre">n</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS9Tokenizer4skipEi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Skip over a given number of tokens</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n</strong> – number of tokens to skip over </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK9LAMMPS_NS9Tokenizer8has_nextEv">
<span id="_CPPv3NK9LAMMPS_NS9Tokenizer8has_nextEv"></span><span id="_CPPv2NK9LAMMPS_NS9Tokenizer8has_nextEv"></span><span id="LAMMPS_NS::Tokenizer::has_nextC"></span><span class="target" id="classLAMMPS__NS_1_1Tokenizer_1a5ac70fe9462200eec1fe01b48ea992f3"></span><span class="pre">bool</span> <code class="sig-name descname"><span class="pre">has_next</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property"><span class="pre">const</span></em><a class="headerlink" href="#_CPPv4NK9LAMMPS_NS9Tokenizer8has_nextEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Indicate whether more tokens are available</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>true if there are more tokens, false if not </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK9LAMMPS_NS9Tokenizer8containsERKNSt6stringE">
<span id="_CPPv3NK9LAMMPS_NS9Tokenizer8containsERKNSt6stringE"></span><span id="_CPPv2NK9LAMMPS_NS9Tokenizer8containsERKNSt6stringE"></span><span id="LAMMPS_NS::Tokenizer::contains__ssCRC"></span><span class="target" id="classLAMMPS__NS_1_1Tokenizer_1abf5acdb9f865006dd3d41f084403f74f"></span><span class="pre">bool</span> <code class="sig-name descname"><span class="pre">contains</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">str</span></em><span class="sig-paren">)</span> <em class="property"><span class="pre">const</span></em><a class="headerlink" href="#_CPPv4NK9LAMMPS_NS9Tokenizer8containsERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Search the text to be processed for a sub-string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong> – string to be searched for </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>true if string was found, false if not </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS9Tokenizer4nextEv">
<span id="_CPPv3N9LAMMPS_NS9Tokenizer4nextEv"></span><span id="_CPPv2N9LAMMPS_NS9Tokenizer4nextEv"></span><span id="LAMMPS_NS::Tokenizer::next"></span><span class="target" id="classLAMMPS__NS_1_1Tokenizer_1afba811f5984f17a43875432cb2845bc3"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <code class="sig-name descname"><span class="pre">next</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS9Tokenizer4nextEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Retrieve next token.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>string with the next token </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS9Tokenizer5countEv">
<span id="_CPPv3N9LAMMPS_NS9Tokenizer5countEv"></span><span id="_CPPv2N9LAMMPS_NS9Tokenizer5countEv"></span><span id="LAMMPS_NS::Tokenizer::count"></span><span class="target" id="classLAMMPS__NS_1_1Tokenizer_1ad873dc786f051a2c04e32d1541d3702e"></span><span class="pre">size_t</span> <code class="sig-name descname"><span class="pre">count</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS9Tokenizer5countEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Count number of tokens in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>number of counted tokens </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS9Tokenizer9as_vectorEv">
<span id="_CPPv3N9LAMMPS_NS9Tokenizer9as_vectorEv"></span><span id="_CPPv2N9LAMMPS_NS9Tokenizer9as_vectorEv"></span><span id="LAMMPS_NS::Tokenizer::as_vector"></span><span class="target" id="classLAMMPS__NS_1_1Tokenizer_1abc12e1da3f00c1a120a02b136f0730dd"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">vector</span><span class="pre">&lt;</span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span><span class="pre">&gt;</span> <code class="sig-name descname"><span class="pre">as_vector</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS9Tokenizer9as_vectorEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Retrieve the entire text converted to an STL vector of tokens.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The STL vector </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp class">
<dt id="_CPPv4N9LAMMPS_NS18TokenizerExceptionE">
<span id="_CPPv3N9LAMMPS_NS18TokenizerExceptionE"></span><span id="_CPPv2N9LAMMPS_NS18TokenizerExceptionE"></span><span id="LAMMPS_NS::TokenizerException"></span><span class="target" id="classLAMMPS__NS_1_1TokenizerException"></span><em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">TokenizerException</span></code> <span class="pre">:</span> <em class="property"><span class="pre">public</span></em> <span class="pre">exception</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS18TokenizerExceptionE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Subclassed by <a class="reference internal" href="#classLAMMPS__NS_1_1InvalidFloatException"><span class="std std-ref">InvalidFloatException</span></a>, <a class="reference internal" href="#classLAMMPS__NS_1_1InvalidIntegerException"><span class="std std-ref">InvalidIntegerException</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS18TokenizerException18TokenizerExceptionERKNSt6stringERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS18TokenizerException18TokenizerExceptionERKNSt6stringERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS18TokenizerException18TokenizerExceptionERKNSt6stringERKNSt6stringE"></span><span id="LAMMPS_NS::TokenizerException::TokenizerException__ssCR.ssCR"></span><span class="target" id="classLAMMPS__NS_1_1TokenizerException_1afcd938a3385e0b950738c2e24cdbc484"></span><code class="sig-name descname"><span class="pre">TokenizerException</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">msg</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">token</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS18TokenizerException18TokenizerExceptionERKNSt6stringERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Thrown during retrieving or skipping tokens</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg</strong> – String with error message </p></li>
<li><p><strong>token</strong> – String of the token/word that caused the error </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK9LAMMPS_NS18TokenizerException4whatEv">
<span id="_CPPv3NK9LAMMPS_NS18TokenizerException4whatEv"></span><span id="_CPPv2NK9LAMMPS_NS18TokenizerException4whatEv"></span><span id="LAMMPS_NS::TokenizerException::whatC"></span><span class="target" id="classLAMMPS__NS_1_1TokenizerException_1ad62489809e3df568e973597b928d6d9b"></span><em class="property"><span class="pre">inline</span></em> <em class="property"><span class="pre">virtual</span></em> <em class="property"><span class="pre">const</span></em> <span class="pre">char</span> <span class="pre">*</span><code class="sig-name descname"><span class="pre">what</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property"><span class="pre">const</span></em><a class="headerlink" href="#_CPPv4NK9LAMMPS_NS18TokenizerException4whatEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Retrieve message describing the thrown exception </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>string with error message </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp class">
<dt id="_CPPv4N9LAMMPS_NS14ValueTokenizerE">
<span id="_CPPv3N9LAMMPS_NS14ValueTokenizerE"></span><span id="_CPPv2N9LAMMPS_NS14ValueTokenizerE"></span><span id="LAMMPS_NS::ValueTokenizer"></span><span class="target" id="classLAMMPS__NS_1_1ValueTokenizer"></span><em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">ValueTokenizer</span></code><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14ValueTokenizerE" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS14ValueTokenizer14ValueTokenizerERKNSt6stringERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS14ValueTokenizer14ValueTokenizerERKNSt6stringERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS14ValueTokenizer14ValueTokenizerERKNSt6stringERKNSt6stringE"></span><span id="LAMMPS_NS::ValueTokenizer::ValueTokenizer__ssCR.ssCR"></span><span class="target" id="classLAMMPS__NS_1_1ValueTokenizer_1a9fbf461f611028a7d95b7df0dc8dbec4"></span><code class="sig-name descname"><span class="pre">ValueTokenizer</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">str</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">separators</span></em> <span class="pre">=</span> <span class="pre">TOKENIZER_DEFAULT_SEPARATORS</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14ValueTokenizer14ValueTokenizerERKNSt6stringERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Class for reading text with numbers</p>
<p><dl class="simple">
<dt><em>See also</em></dt><dd><p><a class="reference internal" href="#_CPPv4N9LAMMPS_NS9TokenizerE" title="LAMMPS_NS::Tokenizer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a></p>
</dd>
</dl>
</p>
<p><dl class="simple">
<dt><strong>See</strong></dt><dd><p>Tokenizer InvalidIntegerException InvalidFloatException </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>str</strong> – String to be processed </p></li>
<li><p><strong>separators</strong> – String with separator characters (default: ” \t\r\n\f”)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS14ValueTokenizer11next_stringEv">
<span id="_CPPv3N9LAMMPS_NS14ValueTokenizer11next_stringEv"></span><span id="_CPPv2N9LAMMPS_NS14ValueTokenizer11next_stringEv"></span><span id="LAMMPS_NS::ValueTokenizer::next_string"></span><span class="target" id="classLAMMPS__NS_1_1ValueTokenizer_1ad19df6455b8dfbfd2e5b1d93fc72d257"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <code class="sig-name descname"><span class="pre">next_string</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14ValueTokenizer11next_stringEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Retrieve next token</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>string with next token </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS14ValueTokenizer11next_tagintEv">
<span id="_CPPv3N9LAMMPS_NS14ValueTokenizer11next_tagintEv"></span><span id="_CPPv2N9LAMMPS_NS14ValueTokenizer11next_tagintEv"></span><span id="LAMMPS_NS::ValueTokenizer::next_tagint"></span><span class="target" id="classLAMMPS__NS_1_1ValueTokenizer_1a388a19376fd8647693fa10077e29a68f"></span><span class="pre">tagint</span> <code class="sig-name descname"><span class="pre">next_tagint</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14ValueTokenizer11next_tagintEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Retrieve next token and convert to tagint</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of next token </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS14ValueTokenizer11next_bigintEv">
<span id="_CPPv3N9LAMMPS_NS14ValueTokenizer11next_bigintEv"></span><span id="_CPPv2N9LAMMPS_NS14ValueTokenizer11next_bigintEv"></span><span id="LAMMPS_NS::ValueTokenizer::next_bigint"></span><span class="target" id="classLAMMPS__NS_1_1ValueTokenizer_1a960e60b9cac96e1abfc9beb6a436e414"></span><span class="pre">bigint</span> <code class="sig-name descname"><span class="pre">next_bigint</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14ValueTokenizer11next_bigintEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Retrieve next token and convert to bigint</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of next token </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS14ValueTokenizer8next_intEv">
<span id="_CPPv3N9LAMMPS_NS14ValueTokenizer8next_intEv"></span><span id="_CPPv2N9LAMMPS_NS14ValueTokenizer8next_intEv"></span><span id="LAMMPS_NS::ValueTokenizer::next_int"></span><span class="target" id="classLAMMPS__NS_1_1ValueTokenizer_1a659db78ef3cd8cdbfa35654fbea28929"></span><span class="pre">int</span> <code class="sig-name descname"><span class="pre">next_int</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14ValueTokenizer8next_intEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Retrieve next token and convert to int</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of next token </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS14ValueTokenizer11next_doubleEv">
<span id="_CPPv3N9LAMMPS_NS14ValueTokenizer11next_doubleEv"></span><span id="_CPPv2N9LAMMPS_NS14ValueTokenizer11next_doubleEv"></span><span id="LAMMPS_NS::ValueTokenizer::next_double"></span><span class="target" id="classLAMMPS__NS_1_1ValueTokenizer_1aa6b2325cb771c1d1aa11cc5bd3c3f2e9"></span><span class="pre">double</span> <code class="sig-name descname"><span class="pre">next_double</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14ValueTokenizer11next_doubleEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Retrieve next token and convert to double</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of next token </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK9LAMMPS_NS14ValueTokenizer8has_nextEv">
<span id="_CPPv3NK9LAMMPS_NS14ValueTokenizer8has_nextEv"></span><span id="_CPPv2NK9LAMMPS_NS14ValueTokenizer8has_nextEv"></span><span id="LAMMPS_NS::ValueTokenizer::has_nextC"></span><span class="target" id="classLAMMPS__NS_1_1ValueTokenizer_1a5ac70fe9462200eec1fe01b48ea992f3"></span><span class="pre">bool</span> <code class="sig-name descname"><span class="pre">has_next</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property"><span class="pre">const</span></em><a class="headerlink" href="#_CPPv4NK9LAMMPS_NS14ValueTokenizer8has_nextEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Indicate whether more tokens are available</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>true if there are more tokens, false if not </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK9LAMMPS_NS14ValueTokenizer8containsERKNSt6stringE">
<span id="_CPPv3NK9LAMMPS_NS14ValueTokenizer8containsERKNSt6stringE"></span><span id="_CPPv2NK9LAMMPS_NS14ValueTokenizer8containsERKNSt6stringE"></span><span id="LAMMPS_NS::ValueTokenizer::contains__ssCRC"></span><span class="target" id="classLAMMPS__NS_1_1ValueTokenizer_1a48b6af4c43173e0a07e80d29f125ae62"></span><span class="pre">bool</span> <code class="sig-name descname"><span class="pre">contains</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">value</span></em><span class="sig-paren">)</span> <em class="property"><span class="pre">const</span></em><a class="headerlink" href="#_CPPv4NK9LAMMPS_NS14ValueTokenizer8containsERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Search the text to be processed for a sub-string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – string with value to be searched for </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>true if string was found, false if not </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS14ValueTokenizer4skipEi">
<span id="_CPPv3N9LAMMPS_NS14ValueTokenizer4skipEi"></span><span id="_CPPv2N9LAMMPS_NS14ValueTokenizer4skipEi"></span><span id="LAMMPS_NS::ValueTokenizer::skip__i"></span><span class="target" id="classLAMMPS__NS_1_1ValueTokenizer_1a4d59f683ac75e831e43d56bff4a4d0b0"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">skip</span></code><span class="sig-paren">(</span><span class="pre">int</span> <em><span class="pre">ntokens</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14ValueTokenizer4skipEi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Skip over a given number of tokens</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n</strong> – number of tokens to skip over </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS14ValueTokenizer5countEv">
<span id="_CPPv3N9LAMMPS_NS14ValueTokenizer5countEv"></span><span id="_CPPv2N9LAMMPS_NS14ValueTokenizer5countEv"></span><span id="LAMMPS_NS::ValueTokenizer::count"></span><span class="target" id="classLAMMPS__NS_1_1ValueTokenizer_1ad873dc786f051a2c04e32d1541d3702e"></span><span class="pre">size_t</span> <code class="sig-name descname"><span class="pre">count</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14ValueTokenizer5countEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Count number of tokens in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>number of counted tokens </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp class">
<dt id="_CPPv4N9LAMMPS_NS23InvalidIntegerExceptionE">
<span id="_CPPv3N9LAMMPS_NS23InvalidIntegerExceptionE"></span><span id="_CPPv2N9LAMMPS_NS23InvalidIntegerExceptionE"></span><span id="LAMMPS_NS::InvalidIntegerException"></span><span class="target" id="classLAMMPS__NS_1_1InvalidIntegerException"></span><em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">InvalidIntegerException</span></code> <span class="pre">:</span> <em class="property"><span class="pre">public</span></em> <a class="reference internal" href="#_CPPv4N9LAMMPS_NS18TokenizerExceptionE" title="LAMMPS_NS::TokenizerException"><span class="pre">TokenizerException</span></a><a class="headerlink" href="#_CPPv4N9LAMMPS_NS23InvalidIntegerExceptionE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp class">
<dt id="_CPPv4N9LAMMPS_NS21InvalidFloatExceptionE">
<span id="_CPPv3N9LAMMPS_NS21InvalidFloatExceptionE"></span><span id="_CPPv2N9LAMMPS_NS21InvalidFloatExceptionE"></span><span id="LAMMPS_NS::InvalidFloatException"></span><span class="target" id="classLAMMPS__NS_1_1InvalidFloatException"></span><em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">InvalidFloatException</span></code> <span class="pre">:</span> <em class="property"><span class="pre">public</span></em> <a class="reference internal" href="#_CPPv4N9LAMMPS_NS18TokenizerExceptionE" title="LAMMPS_NS::TokenizerException"><span class="pre">TokenizerException</span></a><a class="headerlink" href="#_CPPv4N9LAMMPS_NS21InvalidFloatExceptionE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="file-reader-classes">
<h1><span class="section-number">4.10. </span>File reader classes<a class="headerlink" href="#file-reader-classes" title="Permalink to this headline">¶</a></h1>
<p>The purpose of the file reader classes is to simplify the recurring task
of reading and parsing files. They can use the
<a class="reference internal" href="#_CPPv4N9LAMMPS_NS14ValueTokenizerE" title="LAMMPS_NS::ValueTokenizer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">LAMMPS_NS::ValueTokenizer</span></code></a> class to process the read in
text.  The <a class="reference internal" href="#_CPPv4N9LAMMPS_NS14TextFileReaderE" title="LAMMPS_NS::TextFileReader"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">LAMMPS_NS::TextFileReader</span></code></a> is a more general
version while <a class="reference internal" href="#_CPPv4N9LAMMPS_NS19PotentialFileReaderE" title="LAMMPS_NS::PotentialFileReader"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">LAMMPS_NS::PotentialFileReader</span></code></a> is specialized
to implement the behavior expected for looking up and reading/parsing
files with potential parameters in LAMMPS.  The potential file reader
class requires a LAMMPS instance, requires to be run on MPI rank 0 only,
will use the <a class="reference internal" href="#_CPPv4N9LAMMPS_NS5utils23get_potential_file_pathERKNSt6stringE" title="LAMMPS_NS::utils::get_potential_file_path"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">LAMMPS_NS::utils::get_potential_file_path()</span></code></a>
function to look up and open the file, and will call the
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">LAMMPS_NS::Error</span></code> class in case of failures to read or to
convert numbers, so that LAMMPS will be aborted.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Use of PotentialFileReader class in pair style coul/streitz</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span> <span class="n">PotentialFileReader</span> <span class="nf">reader</span><span class="p">(</span><span class="n">lmp</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="s">&quot;coul/streitz&quot;</span><span class="p">);</span>
 <span class="kt">char</span> <span class="o">*</span> <span class="n">line</span><span class="p">;</span>

 <span class="k">while</span><span class="p">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="p">.</span><span class="n">next_line</span><span class="p">(</span><span class="n">NPARAMS_PER_LINE</span><span class="p">)))</span> <span class="p">{</span>
   <span class="k">try</span> <span class="p">{</span>
     <span class="n">ValueTokenizer</span> <span class="nf">values</span><span class="p">(</span><span class="n">line</span><span class="p">);</span>
     <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">iname</span> <span class="o">=</span> <span class="n">values</span><span class="p">.</span><span class="n">next_string</span><span class="p">();</span>

     <span class="kt">int</span> <span class="n">ielement</span><span class="p">;</span>
     <span class="k">for</span> <span class="p">(</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">ielement</span> <span class="o">&lt;</span> <span class="n">nelements</span><span class="p">;</span> <span class="n">ielement</span><span class="o">++</span><span class="p">)</span>
       <span class="k">if</span> <span class="p">(</span><span class="n">iname</span> <span class="o">==</span> <span class="n">elements</span><span class="p">[</span><span class="n">ielement</span><span class="p">])</span> <span class="k">break</span><span class="p">;</span>

     <span class="k">if</span> <span class="p">(</span><span class="n">nparams</span> <span class="o">==</span> <span class="n">maxparam</span><span class="p">)</span> <span class="p">{</span>
       <span class="n">maxparam</span> <span class="o">+=</span> <span class="n">DELTA</span><span class="p">;</span>
       <span class="n">params</span> <span class="o">=</span> <span class="p">(</span><span class="n">Param</span> <span class="o">*</span><span class="p">)</span> <span class="n">memory</span><span class="o">-&gt;</span><span class="n">srealloc</span><span class="p">(</span><span class="n">params</span><span class="p">,</span><span class="n">maxparam</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="n">Param</span><span class="p">),</span>
                                           <span class="s">&quot;pair:params&quot;</span><span class="p">);</span>
     <span class="p">}</span>

     <span class="n">params</span><span class="p">[</span><span class="n">nparams</span><span class="p">].</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement</span><span class="p">;</span>
     <span class="n">params</span><span class="p">[</span><span class="n">nparams</span><span class="p">].</span><span class="n">chi</span> <span class="o">=</span> <span class="n">values</span><span class="p">.</span><span class="n">next_double</span><span class="p">();</span>
     <span class="n">params</span><span class="p">[</span><span class="n">nparams</span><span class="p">].</span><span class="n">eta</span> <span class="o">=</span> <span class="n">values</span><span class="p">.</span><span class="n">next_double</span><span class="p">();</span>
     <span class="n">params</span><span class="p">[</span><span class="n">nparams</span><span class="p">].</span><span class="n">gamma</span> <span class="o">=</span> <span class="n">values</span><span class="p">.</span><span class="n">next_double</span><span class="p">();</span>
     <span class="n">params</span><span class="p">[</span><span class="n">nparams</span><span class="p">].</span><span class="n">zeta</span> <span class="o">=</span> <span class="n">values</span><span class="p">.</span><span class="n">next_double</span><span class="p">();</span>
     <span class="n">params</span><span class="p">[</span><span class="n">nparams</span><span class="p">].</span><span class="n">zcore</span> <span class="o">=</span> <span class="n">values</span><span class="p">.</span><span class="n">next_double</span><span class="p">();</span>

   <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">TokenizerException</span> <span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
     <span class="n">error</span><span class="o">-&gt;</span><span class="n">one</span><span class="p">(</span><span class="n">FLERR</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">());</span>
   <span class="p">}</span>
   <span class="n">nparams</span><span class="o">++</span><span class="p">;</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
<p>A file that would be parsed by the reader code fragment looks like this:</p>
<pre class="literal-block"># DATE: 2015-02-19 UNITS: metal CONTRIBUTOR: Ray Shan CITATION: Streitz and Mintmire, Phys Rev B, 50, 11996-12003 (1994)
#
# X (eV)                J (eV)          gamma (1/AA)   zeta (1/AA)    Z (e)

Al      0.000000        10.328655       0.000000        0.968438        0.763905
O       5.484763        14.035715       0.000000        2.143957        0.000000</pre>
<hr class="docutils" />
<dl class="cpp class">
<dt id="_CPPv4N9LAMMPS_NS14TextFileReaderE">
<span id="_CPPv3N9LAMMPS_NS14TextFileReaderE"></span><span id="_CPPv2N9LAMMPS_NS14TextFileReaderE"></span><span id="LAMMPS_NS::TextFileReader"></span><span class="target" id="classLAMMPS__NS_1_1TextFileReader"></span><em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">TextFileReader</span></code><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14TextFileReaderE" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS14TextFileReader14TextFileReaderERKNSt6stringERKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS14TextFileReader14TextFileReaderERKNSt6stringERKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS14TextFileReader14TextFileReaderERKNSt6stringERKNSt6stringE"></span><span id="LAMMPS_NS::TextFileReader::TextFileReader__ssCR.ssCR"></span><span class="target" id="classLAMMPS__NS_1_1TextFileReader_1a2043b5f5a6222c33ed29f356e09fa50a"></span><code class="sig-name descname"><span class="pre">TextFileReader</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">filename</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">filetype</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14TextFileReader14TextFileReaderERKNSt6stringERKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Class for reading and parsing text files</p>
<p>The value of the class member variable <em>ignore_comments</em> controls whether any text following the pound sign (#) should be ignored (true) or not (false). Default: true, i.e. ignore. <p><dl class="simple">
<dt><em>See also</em></dt><dd><p><a class="reference internal" href="#_CPPv4N9LAMMPS_NS14TextFileReaderE" title="LAMMPS_NS::TextFileReader"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">TextFileReader</span></code></a></p>
</dd>
</dl>
</p>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – Name of file to be read </p></li>
<li><p><strong>filetype</strong> – Description of file type for error messages </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS14TextFileReaderD0Ev">
<span id="_CPPv3N9LAMMPS_NS14TextFileReaderD0Ev"></span><span id="_CPPv2N9LAMMPS_NS14TextFileReaderD0Ev"></span><span id="LAMMPS_NS::TextFileReader::~TextFileReader"></span><span class="target" id="classLAMMPS__NS_1_1TextFileReader_1a60ce1f5ac0e90a8deedc0f0359eacc49"></span><code class="sig-name descname"><span class="pre">~TextFileReader</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14TextFileReaderD0Ev" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Closes the file </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS14TextFileReader9skip_lineEv">
<span id="_CPPv3N9LAMMPS_NS14TextFileReader9skip_lineEv"></span><span id="_CPPv2N9LAMMPS_NS14TextFileReader9skip_lineEv"></span><span id="LAMMPS_NS::TextFileReader::skip_line"></span><span class="target" id="classLAMMPS__NS_1_1TextFileReader_1a13171cc94df93641fa41710249bd2828"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">skip_line</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14TextFileReader9skip_lineEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read the next line and ignore it </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS14TextFileReader9next_lineEi">
<span id="_CPPv3N9LAMMPS_NS14TextFileReader9next_lineEi"></span><span id="_CPPv2N9LAMMPS_NS14TextFileReader9next_lineEi"></span><span id="LAMMPS_NS::TextFileReader::next_line__i"></span><span class="target" id="classLAMMPS__NS_1_1TextFileReader_1ac8028df52c806625ec32fe25eb9e87c0"></span><span class="pre">char</span> <span class="pre">*</span><code class="sig-name descname"><span class="pre">next_line</span></code><span class="sig-paren">(</span><span class="pre">int</span> <em><span class="pre">nparams</span></em> <span class="pre">=</span> <span class="pre">0</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14TextFileReader9next_lineEi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read the next line(s) until <em>nparams</em> words have been read.</p>
<p>This reads a line and counts the words in it, if the number is less than the requested number, it will read the next line, as well. Output will be a string with all read lines combined. The purpose is to somewhat replicate the reading behavior of formatted files in Fortran.</p>
<p>If the <em>ignore_comments</em> class member has the value <em>true</em>, then any text read in is truncated at the first ‘#’ character.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nparams</strong> – Number of words that must be read. Default: 0 </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>String with the concatenated text </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS14TextFileReader12next_dvectorEPdi">
<span id="_CPPv3N9LAMMPS_NS14TextFileReader12next_dvectorEPdi"></span><span id="_CPPv2N9LAMMPS_NS14TextFileReader12next_dvectorEPdi"></span><span id="LAMMPS_NS::TextFileReader::next_dvector__doubleP.i"></span><span class="target" id="classLAMMPS__NS_1_1TextFileReader_1a4c74ed481f64285779f60633e6301a47"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">next_dvector</span></code><span class="sig-paren">(</span><span class="pre">double</span> <span class="pre">*</span><em><span class="pre">list</span></em>, <span class="pre">int</span> <em><span class="pre">n</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14TextFileReader12next_dvectorEPdi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read lines until <em>n</em> doubles have been read and stored in array <em>list</em></p>
<p>This reads lines from the file using the next_line() function, and splits them into floating-point numbers using the ValueTokenizer class and stores the number is the provided list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list</strong> – Pointer to array with suitable storage for <em>n</em> doubles </p></li>
<li><p><strong>n</strong> – Number of doubles to be read </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS14TextFileReader11next_valuesEiRKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS14TextFileReader11next_valuesEiRKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS14TextFileReader11next_valuesEiRKNSt6stringE"></span><span id="LAMMPS_NS::TextFileReader::next_values__i.ssCR"></span><span class="target" id="classLAMMPS__NS_1_1TextFileReader_1a8a0ce533407ad4d77f92c807de0131b0"></span><a class="reference internal" href="#_CPPv4N9LAMMPS_NS14ValueTokenizerE" title="LAMMPS_NS::ValueTokenizer"><span class="pre">ValueTokenizer</span></a> <code class="sig-name descname"><span class="pre">next_values</span></code><span class="sig-paren">(</span><span class="pre">int</span> <em><span class="pre">nparams</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">separators</span></em> <span class="pre">=</span> <span class="pre">TOKENIZER_DEFAULT_SEPARATORS</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14TextFileReader11next_valuesEiRKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read text until <em>nparams</em> words are read and passed to a tokenizer object for custom parsing.</p>
<p>This reads lines from the file using the next_line() function, and splits them into floating-point numbers using the ValueTokenizer class and stores the number is the provided list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nparams</strong> – Number of words to be read </p></li>
<li><p><strong>separators</strong> – String with list of separators. </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ValueTokenizer object for read in text </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt id="_CPPv4N9LAMMPS_NS14TextFileReader15ignore_commentsE">
<span id="_CPPv3N9LAMMPS_NS14TextFileReader15ignore_commentsE"></span><span id="_CPPv2N9LAMMPS_NS14TextFileReader15ignore_commentsE"></span><span id="LAMMPS_NS::TextFileReader::ignore_comments__b"></span><span class="target" id="classLAMMPS__NS_1_1TextFileReader_1a87625d6c23cbea82833fceab91c31bc4"></span><span class="pre">bool</span> <code class="sig-name descname"><span class="pre">ignore_comments</span></code><a class="headerlink" href="#_CPPv4N9LAMMPS_NS14TextFileReader15ignore_commentsE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Controls whether comments are ignored. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp class">
<dt id="_CPPv4N9LAMMPS_NS19PotentialFileReaderE">
<span id="_CPPv3N9LAMMPS_NS19PotentialFileReaderE"></span><span id="_CPPv2N9LAMMPS_NS19PotentialFileReaderE"></span><span id="LAMMPS_NS::PotentialFileReader"></span><span class="target" id="classLAMMPS__NS_1_1PotentialFileReader"></span><em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">PotentialFileReader</span></code> <span class="pre">:</span> <em class="property"><span class="pre">protected</span></em> <a class="reference internal" href="Classes_lammps.html#_CPPv4N9LAMMPS_NS8PointersE" title="LAMMPS_NS::Pointers"><span class="pre">Pointers</span></a><a class="headerlink" href="#_CPPv4N9LAMMPS_NS19PotentialFileReaderE" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS19PotentialFileReader19PotentialFileReaderEP6LAMMPSRKNSt6stringERKNSt6stringEKi">
<span id="_CPPv3N9LAMMPS_NS19PotentialFileReader19PotentialFileReaderEP6LAMMPSRKNSt6stringERKNSt6stringEKi"></span><span id="_CPPv2N9LAMMPS_NS19PotentialFileReader19PotentialFileReaderEP6LAMMPSRKNSt6stringERKNSt6stringEKi"></span><span id="LAMMPS_NS::PotentialFileReader::PotentialFileReader__LAMMPSP.ssCR.ssCR.iC"></span><span class="target" id="classLAMMPS__NS_1_1PotentialFileReader_1a0f2c583b73fbf8059ff99426a74116d2"></span><code class="sig-name descname"><span class="pre">PotentialFileReader</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">class</span></em> <a class="reference internal" href="Classes_lammps.html#_CPPv4N9LAMMPS_NS6LAMMPSE" title="LAMMPS_NS::LAMMPS"><span class="pre">LAMMPS</span></a> <span class="pre">*</span><em><span class="pre">lmp</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">filename</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">potential_name</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">int</span> <em><span class="pre">auto_convert</span></em> <span class="pre">=</span> <span class="pre">0</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS19PotentialFileReader19PotentialFileReaderEP6LAMMPSRKNSt6stringERKNSt6stringEKi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Class for reading and parsing <a class="reference internal" href="Classes_lammps.html#classLAMMPS__NS_1_1LAMMPS"><span class="std std-ref">LAMMPS</span></a> potential files</p>
<p>The value of the class member variable <em>ignore_comments</em> controls whether any text following the pound sign (#) should be ignored (true) or not (false). Default: true, i.e. ignore. <p><dl class="simple">
<dt><em>See also</em></dt><dd><p><a class="reference internal" href="#_CPPv4N9LAMMPS_NS14TextFileReaderE" title="LAMMPS_NS::TextFileReader"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">TextFileReader</span></code></a></p>
</dd>
</dl>
</p>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lmp</strong> – Pointer to <a class="reference internal" href="Classes_lammps.html#classLAMMPS__NS_1_1LAMMPS"><span class="std std-ref">LAMMPS</span></a> instance </p></li>
<li><p><strong>filename</strong> – Name of file to be read </p></li>
<li><p><strong>potential_name</strong> – Name of potential style for error messages </p></li>
<li><p><strong>auto_convert</strong> – Bitmask of supported unit conversions </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS19PotentialFileReaderD0Ev">
<span id="_CPPv3N9LAMMPS_NS19PotentialFileReaderD0Ev"></span><span id="_CPPv2N9LAMMPS_NS19PotentialFileReaderD0Ev"></span><span id="LAMMPS_NS::PotentialFileReader::~PotentialFileReader"></span><span class="target" id="classLAMMPS__NS_1_1PotentialFileReader_1a96c791809f21a3db441fd738b892273e"></span><em class="property"><span class="pre">virtual</span></em> <code class="sig-name descname"><span class="pre">~PotentialFileReader</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS19PotentialFileReaderD0Ev" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Closes the file </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS19PotentialFileReader15ignore_commentsEb">
<span id="_CPPv3N9LAMMPS_NS19PotentialFileReader15ignore_commentsEb"></span><span id="_CPPv2N9LAMMPS_NS19PotentialFileReader15ignore_commentsEb"></span><span id="LAMMPS_NS::PotentialFileReader::ignore_comments__b"></span><span class="target" id="classLAMMPS__NS_1_1PotentialFileReader_1a84753973f8cd425807695e3c889f97f9"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">ignore_comments</span></code><span class="sig-paren">(</span><span class="pre">bool</span> <em><span class="pre">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS19PotentialFileReader15ignore_commentsEb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set comment (= text after ‘#’) handling preference for the file to be read</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – Comment text is ignored if true, or not if false </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS19PotentialFileReader9skip_lineEv">
<span id="_CPPv3N9LAMMPS_NS19PotentialFileReader9skip_lineEv"></span><span id="_CPPv2N9LAMMPS_NS19PotentialFileReader9skip_lineEv"></span><span id="LAMMPS_NS::PotentialFileReader::skip_line"></span><span class="target" id="classLAMMPS__NS_1_1PotentialFileReader_1a13171cc94df93641fa41710249bd2828"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">skip_line</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS19PotentialFileReader9skip_lineEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read a line but ignore its content </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS19PotentialFileReader9next_lineEi">
<span id="_CPPv3N9LAMMPS_NS19PotentialFileReader9next_lineEi"></span><span id="_CPPv2N9LAMMPS_NS19PotentialFileReader9next_lineEi"></span><span id="LAMMPS_NS::PotentialFileReader::next_line__i"></span><span class="target" id="classLAMMPS__NS_1_1PotentialFileReader_1ac8028df52c806625ec32fe25eb9e87c0"></span><span class="pre">char</span> <span class="pre">*</span><code class="sig-name descname"><span class="pre">next_line</span></code><span class="sig-paren">(</span><span class="pre">int</span> <em><span class="pre">nparams</span></em> <span class="pre">=</span> <span class="pre">0</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS19PotentialFileReader9next_lineEi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read the next line(s) until <em>nparams</em> words have been read.</p>
<p>This reads a line and counts the words in it, if the number is less than the requested number, it will read the next line, as well. Output will be a string with all read lines combined. The purpose is to somewhat replicate the reading behavior of formatted files in Fortran.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nparams</strong> – Number of words that must be read. Default: 0 </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>String with the concatenated text </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS19PotentialFileReader12next_dvectorEPdi">
<span id="_CPPv3N9LAMMPS_NS19PotentialFileReader12next_dvectorEPdi"></span><span id="_CPPv2N9LAMMPS_NS19PotentialFileReader12next_dvectorEPdi"></span><span id="LAMMPS_NS::PotentialFileReader::next_dvector__doubleP.i"></span><span class="target" id="classLAMMPS__NS_1_1PotentialFileReader_1a4c74ed481f64285779f60633e6301a47"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">next_dvector</span></code><span class="sig-paren">(</span><span class="pre">double</span> <span class="pre">*</span><em><span class="pre">list</span></em>, <span class="pre">int</span> <em><span class="pre">n</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS19PotentialFileReader12next_dvectorEPdi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read lines until <em>n</em> doubles have been read and stored in array <em>list</em></p>
<p>This reads lines from the file using the next_line() function, and splits them into floating-point numbers using the ValueTokenizer class and stores the number is the provided list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list</strong> – Pointer to array with suitable storage for <em>n</em> doubles </p></li>
<li><p><strong>n</strong> – Number of doubles to be read </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS19PotentialFileReader11next_valuesEiRKNSt6stringE">
<span id="_CPPv3N9LAMMPS_NS19PotentialFileReader11next_valuesEiRKNSt6stringE"></span><span id="_CPPv2N9LAMMPS_NS19PotentialFileReader11next_valuesEiRKNSt6stringE"></span><span id="LAMMPS_NS::PotentialFileReader::next_values__i.ssCR"></span><span class="target" id="classLAMMPS__NS_1_1PotentialFileReader_1a8a0ce533407ad4d77f92c807de0131b0"></span><a class="reference internal" href="#_CPPv4N9LAMMPS_NS14ValueTokenizerE" title="LAMMPS_NS::ValueTokenizer"><span class="pre">ValueTokenizer</span></a> <code class="sig-name descname"><span class="pre">next_values</span></code><span class="sig-paren">(</span><span class="pre">int</span> <em><span class="pre">nparams</span></em>, <em class="property"><span class="pre">const</span></em> <span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <span class="pre">&amp;</span><em><span class="pre">separators</span></em> <span class="pre">=</span> <span class="pre">TOKENIZER_DEFAULT_SEPARATORS</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS19PotentialFileReader11next_valuesEiRKNSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read text until <em>nparams</em> words are read and passed to a tokenizer object for custom parsing.</p>
<p>This reads lines from the file using the next_line() function, and splits them into floating-point numbers using the ValueTokenizer class and stores the number is the provided list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nparams</strong> – Number of words to be read </p></li>
<li><p><strong>separators</strong> – String with list of separators. </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ValueTokenizer object for read in text </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS19PotentialFileReader11next_doubleEv">
<span id="_CPPv3N9LAMMPS_NS19PotentialFileReader11next_doubleEv"></span><span id="_CPPv2N9LAMMPS_NS19PotentialFileReader11next_doubleEv"></span><span id="LAMMPS_NS::PotentialFileReader::next_double"></span><span class="target" id="classLAMMPS__NS_1_1PotentialFileReader_1aa6b2325cb771c1d1aa11cc5bd3c3f2e9"></span><span class="pre">double</span> <code class="sig-name descname"><span class="pre">next_double</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS19PotentialFileReader11next_doubleEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read next line and convert first word to a double</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Value of first word in line as double </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS19PotentialFileReader8next_intEv">
<span id="_CPPv3N9LAMMPS_NS19PotentialFileReader8next_intEv"></span><span id="_CPPv2N9LAMMPS_NS19PotentialFileReader8next_intEv"></span><span id="LAMMPS_NS::PotentialFileReader::next_int"></span><span class="target" id="classLAMMPS__NS_1_1PotentialFileReader_1a659db78ef3cd8cdbfa35654fbea28929"></span><span class="pre">int</span> <code class="sig-name descname"><span class="pre">next_int</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS19PotentialFileReader8next_intEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read next line and convert first word to an int</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Value of first word in line as int </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS19PotentialFileReader11next_tagintEv">
<span id="_CPPv3N9LAMMPS_NS19PotentialFileReader11next_tagintEv"></span><span id="_CPPv2N9LAMMPS_NS19PotentialFileReader11next_tagintEv"></span><span id="LAMMPS_NS::PotentialFileReader::next_tagint"></span><span class="target" id="classLAMMPS__NS_1_1PotentialFileReader_1a388a19376fd8647693fa10077e29a68f"></span><span class="pre">tagint</span> <code class="sig-name descname"><span class="pre">next_tagint</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS19PotentialFileReader11next_tagintEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read next line and convert first word to a tagint</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Value of first word in line as tagint </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS19PotentialFileReader11next_bigintEv">
<span id="_CPPv3N9LAMMPS_NS19PotentialFileReader11next_bigintEv"></span><span id="_CPPv2N9LAMMPS_NS19PotentialFileReader11next_bigintEv"></span><span id="LAMMPS_NS::PotentialFileReader::next_bigint"></span><span class="target" id="classLAMMPS__NS_1_1PotentialFileReader_1a960e60b9cac96e1abfc9beb6a436e414"></span><span class="pre">bigint</span> <code class="sig-name descname"><span class="pre">next_bigint</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS19PotentialFileReader11next_bigintEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read next line and convert first word to a bigint</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Value of first word in line as bigint </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS19PotentialFileReader11next_stringEv">
<span id="_CPPv3N9LAMMPS_NS19PotentialFileReader11next_stringEv"></span><span id="_CPPv2N9LAMMPS_NS19PotentialFileReader11next_stringEv"></span><span id="LAMMPS_NS::PotentialFileReader::next_string"></span><span class="target" id="classLAMMPS__NS_1_1PotentialFileReader_1ad19df6455b8dfbfd2e5b1d93fc72d257"></span><span class="pre">std</span><span class="pre">::</span><span class="pre">string</span> <code class="sig-name descname"><span class="pre">next_string</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS19PotentialFileReader11next_stringEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read next line and return first word</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>First word of read in line </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="memory-pool-classes">
<h1><span class="section-number">4.11. </span>Memory pool classes<a class="headerlink" href="#memory-pool-classes" title="Permalink to this headline">¶</a></h1>
<p>The memory pool classes are used for cases where otherwise many
small memory allocations would be needed and where the data would
be either all used or all freed.  One example for that is the
storage of neighbor lists.  The memory management strategy is
based on the assumption that allocations will be in chunks of similar
sizes.  The allocation is then not done per individual call for a
reserved chunk of memory, but for a “page” that can hold multiple
chunks of data.  A parameter for the maximum chunk size must be
provided, as that is used to determine whether a new page of memory
must be used.</p>
<p>The <a class="reference internal" href="#_CPPv4I0EN9LAMMPS_NS6MyPageE" title="LAMMPS_NS::MyPage"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MyPage</span></code></a> class offers two ways to
reserve a chunk: 1) with <a class="reference internal" href="#_CPPv4N9LAMMPS_NS6MyPage3getEi" title="LAMMPS_NS::MyPage::get"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">get()</span></code></a> the
chunk size needs to be known in advance, 2) with <a class="reference internal" href="#_CPPv4N9LAMMPS_NS6MyPage4vgetEv" title="LAMMPS_NS::MyPage::vget"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vget()</span></code></a> a pointer to the next chunk is returned, but
its size is registered later with <a class="reference internal" href="#_CPPv4N9LAMMPS_NS6MyPage4vgotEi" title="LAMMPS_NS::MyPage::vgot"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vgot()</span></code></a>.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Example of using <a class="reference internal" href="#_CPPv4I0EN9LAMMPS_NS6MyPageE" title="LAMMPS_NS::MyPage"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MyPage</span></code></a></span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span>   <span class="cp">#include</span> <span class="cpf">&quot;my_page.h&quot;</span><span class="cp"></span>
   <span class="k">using</span> <span class="k">namespace</span> <span class="n">LAMMPS_NS</span><span class="p">;</span>

   <span class="n">MyPage</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">dpage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyPage</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">;</span>
   <span class="c1">// max size of chunk: 256, size of page: 10240 doubles (=81920 bytes)</span>
   <span class="n">dpage</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span><span class="mi">10240</span><span class="p">);</span>

   <span class="kt">double</span> <span class="o">**</span><span class="nf">build_some_lists</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="n">dpage</span><span class="o">-&gt;</span><span class="n">reset</span><span class="p">();</span>
       <span class="kt">double</span> <span class="o">**</span><span class="n">dlist</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">double</span><span class="o">*</span><span class="p">[</span><span class="n">num</span><span class="p">];</span>
       <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
           <span class="kt">double</span> <span class="o">*</span><span class="n">dptr</span> <span class="o">=</span> <span class="n">dpage</span><span class="p">.</span><span class="n">vget</span><span class="p">();</span>
           <span class="kt">int</span> <span class="n">jnum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
           <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">jmax</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
               <span class="c1">// compute some dvalue for eligible loop index j</span>
               <span class="n">dptr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">dvalue</span><span class="p">;</span>
               <span class="o">++</span><span class="n">jnum</span><span class="p">;</span>
           <span class="p">}</span>
           <span class="k">if</span> <span class="p">(</span><span class="n">dpage</span><span class="p">.</span><span class="n">status</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
               <span class="c1">// handle out of memory or jnum too large errors</span>
           <span class="p">}</span>
           <span class="n">dpage</span><span class="p">.</span><span class="n">vgot</span><span class="p">(</span><span class="n">jnum</span><span class="p">);</span>
           <span class="n">dlist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">dptr</span><span class="p">;</span>
       <span class="p">}</span>
       <span class="k">return</span> <span class="n">dlist</span><span class="p">;</span>
   <span class="p">}</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<dl class="cpp class">
<dt id="_CPPv4I0EN9LAMMPS_NS6MyPageE">
<span id="_CPPv3I0EN9LAMMPS_NS6MyPageE"></span><span id="_CPPv2I0EN9LAMMPS_NS6MyPageE"></span><span class="pre">template&lt;</span><span class="pre">class</span> <code class="sig-name descname"><span class="pre">T</span></code><span class="pre">&gt;</span><br /><span class="target" id="classLAMMPS__NS_1_1MyPage"></span><em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">MyPage</span></code><a class="headerlink" href="#_CPPv4I0EN9LAMMPS_NS6MyPageE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Templated class for storing chunks of datums in pages. </p>
<p>The size of the chunk may vary from call to call, but must be less or equal than the <em>maxchunk</em> setting. The chunks are not returnable like with malloc() (i.e. you cannot call free() on them individually). One can only reset and start over. The purpose of this class is to replace many small memory allocations via malloc() with a few large ones. Since the pages are never freed until the class is re-initialized, they can be re-used without having to re-allocate them by calling the <a class="reference internal" href="#classLAMMPS__NS_1_1MyPage_1ad20897c5c8bd47f5d4005989bead0e55"><span class="std std-ref">reset()</span></a> method.</p>
<p>The settings <em>maxchunk</em>, <em>pagesize</em>, and <em>pagedelta</em> control the memory allocation strategy. The <em>maxchunk</em> value represents the expected largest number of items per chunk. If there is less space left on the current page, a new page is allocated for the next chunk. The <em>pagesize</em> value represents how many items can fit on a single page. It should have space for multiple chunks of size <em>maxchunk</em>. The combination of these two parameters determines how much memory is wasted by either switching to the next page too soon or allocating too large pages that never get properly used. It is an error, if a requested chunk is larger than <em>maxchunk</em>. The <em>pagedelta</em> parameter determines how many pages are allocated in one go. In combination with the <em>pagesize</em> setting, this determines how often blocks of memory get allocated (fewer allocations will result in faster execution).</p>
<p><div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a template class with explicit instantiation. If the class is used with a new data type a new explicit instantiation may need to be added at the end of the file <code class="docutils literal notranslate"><span class="pre">src/my_page.cpp</span></code> to avoid symbol lookup errors. </p>
</div>
</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS6MyPage6MyPageEv">
<span id="_CPPv3N9LAMMPS_NS6MyPage6MyPageEv"></span><span id="_CPPv2N9LAMMPS_NS6MyPage6MyPageEv"></span><span id="LAMMPS_NS::MyPage::MyPage"></span><span class="target" id="classLAMMPS__NS_1_1MyPage_1aaea419ba80ccc8fc23bcfd0870c1e875"></span><code class="sig-name descname"><span class="pre">MyPage</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS6MyPage6MyPageEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Create a class instance</p>
<p>Need to call <a class="reference internal" href="#classLAMMPS__NS_1_1MyPage_1a381c748265a923272bd332b3905a9891"><span class="std std-ref">init()</span></a> before use to define allocation settings </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS6MyPage4initEiii">
<span id="_CPPv3N9LAMMPS_NS6MyPage4initEiii"></span><span id="_CPPv2N9LAMMPS_NS6MyPage4initEiii"></span><span id="LAMMPS_NS::MyPage::init__i.i.i"></span><span class="target" id="classLAMMPS__NS_1_1MyPage_1a381c748265a923272bd332b3905a9891"></span><span class="pre">int</span> <code class="sig-name descname"><span class="pre">init</span></code><span class="sig-paren">(</span><span class="pre">int</span> <em><span class="pre">user_maxchunk</span></em> <span class="pre">=</span> <span class="pre">1</span>, <span class="pre">int</span> <em><span class="pre">user_pagesize</span></em> <span class="pre">=</span> <span class="pre">1024</span>, <span class="pre">int</span> <em><span class="pre">user_pagedelta</span></em> <span class="pre">=</span> <span class="pre">1</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS6MyPage4initEiii" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>(Re-)initialize the set of pages and allocation parameters.</p>
<p>This also frees all previously allocated storage and allocates the first page(s).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user_maxchunk</strong> – Expected maximum number of items for one chunk </p></li>
<li><p><strong>user_pagesize</strong> – Number of items on a single memory page </p></li>
<li><p><strong>user_pagedelta</strong> – Number of pages to allocate with one malloc </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>1 if there were invalid parameters, 2 if there was an allocation error or 0 if successful </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS6MyPage3getEi">
<span id="_CPPv3N9LAMMPS_NS6MyPage3getEi"></span><span id="_CPPv2N9LAMMPS_NS6MyPage3getEi"></span><span id="LAMMPS_NS::MyPage::get__i"></span><span class="target" id="classLAMMPS__NS_1_1MyPage_1ac0fe0e7127a43512b203e64202414cab"></span><a class="reference internal" href="#_CPPv4I0EN9LAMMPS_NS6MyPageE" title="LAMMPS_NS::MyPage::T"><span class="pre">T</span></a> <span class="pre">*</span><code class="sig-name descname"><span class="pre">get</span></code><span class="sig-paren">(</span><span class="pre">int</span> <em><span class="pre">n</span></em> <span class="pre">=</span> <span class="pre">1</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS6MyPage3getEi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Pointer to location that can store N items.</p>
<p>This will allocate more pages as needed. If the parameter <em>N</em> is larger than the <em>maxchunk</em> setting an error is flagged.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n</strong> – number of items for which storage is requested </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>memory location or null pointer, if error or allocation failed </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS6MyPage4vgetEv">
<span id="_CPPv3N9LAMMPS_NS6MyPage4vgetEv"></span><span id="_CPPv2N9LAMMPS_NS6MyPage4vgetEv"></span><span id="LAMMPS_NS::MyPage::vget"></span><span class="target" id="classLAMMPS__NS_1_1MyPage_1a9d22e2eb992cdc9902cf841fce95564c"></span><em class="property"><span class="pre">inline</span></em> <a class="reference internal" href="#_CPPv4I0EN9LAMMPS_NS6MyPageE" title="LAMMPS_NS::MyPage::T"><span class="pre">T</span></a> <span class="pre">*</span><code class="sig-name descname"><span class="pre">vget</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS6MyPage4vgetEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get pointer to location that can store <em>maxchunk</em> items.</p>
<p>This will return the same pointer as the previous call to this function unless <a class="reference internal" href="#classLAMMPS__NS_1_1MyPage_1a8b3b7dc16eae4b0445e534a37eb85806"><span class="std std-ref">vgot()</span></a> is called afterwards to record how many items of the chunk were actually used.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>pointer to chunk of memory or null pointer if run out of memory </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS6MyPage4vgotEi">
<span id="_CPPv3N9LAMMPS_NS6MyPage4vgotEi"></span><span id="_CPPv2N9LAMMPS_NS6MyPage4vgotEi"></span><span id="LAMMPS_NS::MyPage::vgot__i"></span><span class="target" id="classLAMMPS__NS_1_1MyPage_1a8b3b7dc16eae4b0445e534a37eb85806"></span><em class="property"><span class="pre">inline</span></em> <span class="pre">void</span> <code class="sig-name descname"><span class="pre">vgot</span></code><span class="sig-paren">(</span><span class="pre">int</span> <em><span class="pre">n</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS6MyPage4vgotEi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Mark <em>N</em> items as used of the chunk reserved with a preceding call to <a class="reference internal" href="#classLAMMPS__NS_1_1MyPage_1a9d22e2eb992cdc9902cf841fce95564c"><span class="std std-ref">vget()</span></a>.</p>
<p>This will advance the internal pointer inside the current memory page. It is not necessary to call this function for <em>N</em> = 0, that is the reserved storage was not used. A following call to <a class="reference internal" href="#classLAMMPS__NS_1_1MyPage_1a9d22e2eb992cdc9902cf841fce95564c"><span class="std std-ref">vget()</span></a> will then reserve the same location again. It is an error if <em>N</em> &gt; <em>maxchunk</em>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n</strong> – Number of items used in previously reserved chunk </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS6MyPage5resetEv">
<span id="_CPPv3N9LAMMPS_NS6MyPage5resetEv"></span><span id="_CPPv2N9LAMMPS_NS6MyPage5resetEv"></span><span id="LAMMPS_NS::MyPage::reset"></span><span class="target" id="classLAMMPS__NS_1_1MyPage_1ad20897c5c8bd47f5d4005989bead0e55"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">reset</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS6MyPage5resetEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Reset state of memory pool without freeing any memory </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK9LAMMPS_NS6MyPage4sizeEv">
<span id="_CPPv3NK9LAMMPS_NS6MyPage4sizeEv"></span><span id="_CPPv2NK9LAMMPS_NS6MyPage4sizeEv"></span><span id="LAMMPS_NS::MyPage::sizeC"></span><span class="target" id="classLAMMPS__NS_1_1MyPage_1ac3fe9e82d5f4f1d55a5c104a2a5d37a6"></span><em class="property"><span class="pre">inline</span></em> <span class="pre">double</span> <code class="sig-name descname"><span class="pre">size</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property"><span class="pre">const</span></em><a class="headerlink" href="#_CPPv4NK9LAMMPS_NS6MyPage4sizeEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return total size of allocated pages</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>total storage used in bytes </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK9LAMMPS_NS6MyPage6statusEv">
<span id="_CPPv3NK9LAMMPS_NS6MyPage6statusEv"></span><span id="_CPPv2NK9LAMMPS_NS6MyPage6statusEv"></span><span id="LAMMPS_NS::MyPage::statusC"></span><span class="target" id="classLAMMPS__NS_1_1MyPage_1a92d2adf8350ab6a66718eab4a990dffb"></span><em class="property"><span class="pre">inline</span></em> <span class="pre">int</span> <code class="sig-name descname"><span class="pre">status</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property"><span class="pre">const</span></em><a class="headerlink" href="#_CPPv4NK9LAMMPS_NS6MyPage6statusEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return error status</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 if no error, 1 requested chunk size &gt; maxchunk, 2 if malloc failed </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp class">
<dt id="_CPPv4I0EN9LAMMPS_NS11MyPoolChunkE">
<span id="_CPPv3I0EN9LAMMPS_NS11MyPoolChunkE"></span><span id="_CPPv2I0EN9LAMMPS_NS11MyPoolChunkE"></span><span class="pre">template&lt;</span><span class="pre">class</span> <code class="sig-name descname"><span class="pre">T</span></code><span class="pre">&gt;</span><br /><span class="target" id="classLAMMPS__NS_1_1MyPoolChunk"></span><em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">MyPoolChunk</span></code><a class="headerlink" href="#_CPPv4I0EN9LAMMPS_NS11MyPoolChunkE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Templated class for storing chunks of datums in pages. </p>
<p>The size of the chunk may vary from call to call between the <em>minchunk</em> and <em>maxchunk</em> setting. Chunks may be returned to the pool for re-use. Chunks can be reserved in <em>nbin</em> different sizes between <em>minchunk</em> and <em>maxchunk</em>. The <em>chunksperpage</em> setting specifies how many chunks are stored on any page and the <em>pagedelta</em> setting determines how many pages are allocated in one go. Pages are never freed, so they can be re-used without re-allocation.</p>
<p><div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a template class with explicit instantiation. If the class is used with a new data type a new explicit instantiation may need to be added at the end of the file <code class="docutils literal notranslate"><span class="pre">src/my_pool_chunk.cpp</span></code> to avoid symbol lookup errors. </p>
</div>
</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS11MyPoolChunk11MyPoolChunkEiiiii">
<span id="_CPPv3N9LAMMPS_NS11MyPoolChunk11MyPoolChunkEiiiii"></span><span id="_CPPv2N9LAMMPS_NS11MyPoolChunk11MyPoolChunkEiiiii"></span><span id="LAMMPS_NS::MyPoolChunk::MyPoolChunk__i.i.i.i.i"></span><span class="target" id="classLAMMPS__NS_1_1MyPoolChunk_1a60daa98fd41e5ff09753fe55f044b453"></span><code class="sig-name descname"><span class="pre">MyPoolChunk</span></code><span class="sig-paren">(</span><span class="pre">int</span> <em><span class="pre">user_minchunk</span></em> <span class="pre">=</span> <span class="pre">1</span>, <span class="pre">int</span> <em><span class="pre">user_maxchunk</span></em> <span class="pre">=</span> <span class="pre">1</span>, <span class="pre">int</span> <em><span class="pre">user_nbin</span></em> <span class="pre">=</span> <span class="pre">1</span>, <span class="pre">int</span> <em><span class="pre">user_chunkperpage</span></em> <span class="pre">=</span> <span class="pre">1024</span>, <span class="pre">int</span> <em><span class="pre">user_pagedelta</span></em> <span class="pre">=</span> <span class="pre">1</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS11MyPoolChunk11MyPoolChunkEiiiii" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Create a class instance and set memory pool parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user_minchunk</strong> – Minimal chunk size </p></li>
<li><p><strong>user_maxchunk</strong> – Maximal chunk size </p></li>
<li><p><strong>user_nbin</strong> – Number of bins of different chunk sizes </p></li>
<li><p><strong>user_chunkperpage</strong> – Number of chunks per page </p></li>
<li><p><strong>user_pagedelta</strong> – Number of pages to allocate in one go </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS11MyPoolChunkD0Ev">
<span id="_CPPv3N9LAMMPS_NS11MyPoolChunkD0Ev"></span><span id="_CPPv2N9LAMMPS_NS11MyPoolChunkD0Ev"></span><span id="LAMMPS_NS::MyPoolChunk::~MyPoolChunk"></span><span class="target" id="classLAMMPS__NS_1_1MyPoolChunk_1aa185474081f1f923a35914ed67077e11"></span><code class="sig-name descname"><span class="pre">~MyPoolChunk</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS11MyPoolChunkD0Ev" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Destroy class instance and free all allocated memory </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS11MyPoolChunk3getERi">
<span id="_CPPv3N9LAMMPS_NS11MyPoolChunk3getERi"></span><span id="_CPPv2N9LAMMPS_NS11MyPoolChunk3getERi"></span><span id="LAMMPS_NS::MyPoolChunk::get__iR"></span><span class="target" id="classLAMMPS__NS_1_1MyPoolChunk_1a591380d4a3a168110139f35e1d56a3c9"></span><a class="reference internal" href="#_CPPv4I0EN9LAMMPS_NS11MyPoolChunkE" title="LAMMPS_NS::MyPoolChunk::T"><span class="pre">T</span></a> <span class="pre">*</span><code class="sig-name descname"><span class="pre">get</span></code><span class="sig-paren">(</span><span class="pre">int</span> <span class="pre">&amp;</span><em><span class="pre">index</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS11MyPoolChunk3getERi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return pointer/index of unused chunk of size maxchunk</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>index</strong> – Index of chunk in memory pool </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Pointer to requested chunk of storage </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS11MyPoolChunk3getEiRi">
<span id="_CPPv3N9LAMMPS_NS11MyPoolChunk3getEiRi"></span><span id="_CPPv2N9LAMMPS_NS11MyPoolChunk3getEiRi"></span><span id="LAMMPS_NS::MyPoolChunk::get__i.iR"></span><span class="target" id="classLAMMPS__NS_1_1MyPoolChunk_1a781c43c8f6e18dcb99c613292a38cc4e"></span><a class="reference internal" href="#_CPPv4I0EN9LAMMPS_NS11MyPoolChunkE" title="LAMMPS_NS::MyPoolChunk::T"><span class="pre">T</span></a> <span class="pre">*</span><code class="sig-name descname"><span class="pre">get</span></code><span class="sig-paren">(</span><span class="pre">int</span> <em><span class="pre">n</span></em>, <span class="pre">int</span> <span class="pre">&amp;</span><em><span class="pre">index</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS11MyPoolChunk3getEiRi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return pointer/index of unused chunk of size N</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – Size of chunk </p></li>
<li><p><strong>index</strong> – Index of chunk in memory pool </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Pointer to requested chunk of storage </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS11MyPoolChunk3putEi">
<span id="_CPPv3N9LAMMPS_NS11MyPoolChunk3putEi"></span><span id="_CPPv2N9LAMMPS_NS11MyPoolChunk3putEi"></span><span id="LAMMPS_NS::MyPoolChunk::put__i"></span><span class="target" id="classLAMMPS__NS_1_1MyPoolChunk_1acf93b81dd253b533195c20ee85621412"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">put</span></code><span class="sig-paren">(</span><span class="pre">int</span> <em><span class="pre">index</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS11MyPoolChunk3putEi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Put indexed chunk back into memory pool via free list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>index</strong> – Memory chunk index returned by call to <a class="reference internal" href="#classLAMMPS__NS_1_1MyPoolChunk_1a591380d4a3a168110139f35e1d56a3c9"><span class="std std-ref">get()</span></a> </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK9LAMMPS_NS11MyPoolChunk4sizeEv">
<span id="_CPPv3NK9LAMMPS_NS11MyPoolChunk4sizeEv"></span><span id="_CPPv2NK9LAMMPS_NS11MyPoolChunk4sizeEv"></span><span id="LAMMPS_NS::MyPoolChunk::sizeC"></span><span class="target" id="classLAMMPS__NS_1_1MyPoolChunk_1ac3fe9e82d5f4f1d55a5c104a2a5d37a6"></span><span class="pre">double</span> <code class="sig-name descname"><span class="pre">size</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property"><span class="pre">const</span></em><a class="headerlink" href="#_CPPv4NK9LAMMPS_NS11MyPoolChunk4sizeEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return total size of allocated pages</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>total storage used in bytes </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK9LAMMPS_NS11MyPoolChunk6statusEv">
<span id="_CPPv3NK9LAMMPS_NS11MyPoolChunk6statusEv"></span><span id="_CPPv2NK9LAMMPS_NS11MyPoolChunk6statusEv"></span><span id="LAMMPS_NS::MyPoolChunk::statusC"></span><span class="target" id="classLAMMPS__NS_1_1MyPoolChunk_1a92d2adf8350ab6a66718eab4a990dffb"></span><em class="property"><span class="pre">inline</span></em> <span class="pre">int</span> <code class="sig-name descname"><span class="pre">status</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property"><span class="pre">const</span></em><a class="headerlink" href="#_CPPv4NK9LAMMPS_NS11MyPoolChunk6statusEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return error status</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 if no error, 1 if invalid input, 2 if malloc() failed, 3 if chunk &gt; maxchunk </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="eigensolver-functions">
<h1><span class="section-number">4.12. </span>Eigensolver functions<a class="headerlink" href="#eigensolver-functions" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">MathEigen</span></code> sub-namespace of the <code class="docutils literal notranslate"><span class="pre">LAMMPS_NS</span></code> namespace contains
functions and classes for eigensolvers. Currently only the
<a class="reference internal" href="#_CPPv4N9MathEigen7jacobi3EPPCKdPdPPd" title="MathEigen::jacobi3"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">jacobi3</span> <span class="pre">function</span></code></a> is used in various
places in LAMMPS.  That function is built on top of a group of more
generic eigensolvers that are maintained in the <code class="docutils literal notranslate"><span class="pre">math_eigen_impl.h</span></code>
header file.  This header contains the implementation of three template
classes:</p>
<ol class="arabic simple">
<li><p>“Jacobi” calculates all of the eigenvalues and eigenvectors
of a dense, symmetric, real matrix.</p></li>
<li><p>The “PEigenDense” class only calculates the principal eigenvalue
(ie. the largest or smallest eigenvalue), and its corresponding
eigenvector.  However it is much more efficient than “Jacobi” when
applied to large matrices (larger than 13x13).  PEigenDense also can
understand complex-valued Hermitian matrices.</p></li>
<li><p>The “LambdaLanczos” class is a generalization of “PEigenDense” which can be
applied to arbitrary sparse matrices.</p></li>
</ol>
<p>The “math_eigen_impl.h” code is an amalgamation of <a class="reference external" href="https://github.com/jewettaij/jacobi_pd">jacobi_pd</a> by Andrew Jewett at Scripps
Research (under CC0-1.0 license) and <a class="reference external" href="https://github.com/mrcdr/lambda-lanczos">Lambda Lanczos</a> by Yuya Kurebayashi at
Tohoku University (under MIT license)</p>
<hr class="docutils" />
<dl class="cpp function">
<dt id="_CPPv4N9MathEigen7jacobi3EPPCKdPdPPd">
<span id="_CPPv3N9MathEigen7jacobi3EPPCKdPdPPd"></span><span id="_CPPv2N9MathEigen7jacobi3EPPCKdPdPPd"></span><span id="MathEigen::jacobi3__doubleCPCP.doubleP.doublePP"></span><span class="target" id="math__eigen_8h_1a45b76b76e0eabf711328124fa47905ee"></span><span class="pre">int</span> <code class="sig-prename descclassname"><span class="pre">MathEigen</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">jacobi3</span></code><span class="sig-paren">(</span><span class="pre">double</span> <em class="property"><span class="pre">const</span></em> <span class="pre">*</span><em class="property"><span class="pre">const</span></em> <span class="pre">*</span><em><span class="pre">mat</span></em>, <span class="pre">double</span> <span class="pre">*</span><em><span class="pre">eval</span></em>, <span class="pre">double</span> <span class="pre">*</span><span class="pre">*</span><em><span class="pre">evec</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9MathEigen7jacobi3EPPCKdPdPPd" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A specialized function which finds the eigenvalues and eigenvectors of a 3x3 matrix (in double ** format).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mat</strong> – the 3x3 matrix you wish to diagonalize </p></li>
<li><p><strong>eval</strong> – store the eigenvalues here </p></li>
<li><p><strong>evec</strong> – store the eigenvectors here… </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if eigenvalue calculation converged, 1 if it failed </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9MathEigen7jacobi3EAL3E_AL3E_KdPdAL3E_AL3E_d">
<span id="_CPPv3N9MathEigen7jacobi3EAL3E_AL3E_KdPdAL3E_AL3E_d"></span><span id="_CPPv2N9MathEigen7jacobi3EA3_A3_KdPdA3_A3_d"></span><span id="MathEigen::jacobi3__doubleCAA.doubleP.doubleAA"></span><span class="target" id="math__eigen_8h_1af77ad53d5574d7aa03ee01ccd1680a85"></span><span class="pre">int</span> <code class="sig-prename descclassname"><span class="pre">MathEigen</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">jacobi3</span></code><span class="sig-paren">(</span><span class="pre">double</span> <em class="property"><span class="pre">const</span></em> <em><span class="pre">mat</span></em><span class="pre">[</span><span class="pre">3</span><span class="pre">]</span><span class="pre">[</span><span class="pre">3</span><span class="pre">]</span>, <span class="pre">double</span> <span class="pre">*</span><em><span class="pre">eval</span></em>, <span class="pre">double</span> <em><span class="pre">evec</span></em><span class="pre">[</span><span class="pre">3</span><span class="pre">]</span><span class="pre">[</span><span class="pre">3</span><span class="pre">]</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9MathEigen7jacobi3EAL3E_AL3E_KdPdAL3E_AL3E_d" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>This is an overloaded member function, provided for convenience. It differs from the above function only in what argument(s) it accepts. </p>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="communication-buffer-coding-with-ubuf">
<h1><span class="section-number">4.13. </span>Communication buffer coding with <em>ubuf</em><a class="headerlink" href="#communication-buffer-coding-with-ubuf" title="Permalink to this headline">¶</a></h1>
<p>LAMMPS uses communication buffers where it collects data from various
class instances and then exchanges the data with neighboring sub-domains.
For simplicity those buffers are defined as <code class="docutils literal notranslate"><span class="pre">double</span></code> buffers and
used for doubles and integer numbers. This presents a unique problem
when 64-bit integers are used.  While the storage needed for a <code class="docutils literal notranslate"><span class="pre">double</span></code>
is also 64-bit, it cannot be used by a simple assignment.  To get around
that limitation, LAMMPS uses the <a class="reference internal" href="#_CPPv4N9LAMMPS_NS4ubufE" title="LAMMPS_NS::ubuf"><code class="xref cpp cpp-union docutils literal notranslate"><span class="pre">ubuf</span></code></a>
union.  It is used in the various “pack” and “unpack” functions in the
LAMMPS classes to store and retrieve integers that may be 64-bit from
the communication buffers.</p>
<hr class="docutils" />
<dl class="cpp union">
<dt id="_CPPv4N9LAMMPS_NS4ubufE">
<span id="_CPPv3N9LAMMPS_NS4ubufE"></span><span id="_CPPv2N9LAMMPS_NS4ubufE"></span><span class="target" id="unionLAMMPS__NS_1_1ubuf"></span><em class="property"><span class="pre">union</span> </em><code class="sig-prename descclassname"><span class="pre">LAMMPS_NS</span><code class="sig-prename descclassname"><span class="pre">::</span></code></code><code class="sig-name descname"><span class="pre">ubuf</span></code><a class="headerlink" href="#_CPPv4N9LAMMPS_NS4ubufE" title="Permalink to this definition">¶</a><br /></dt>
<dd><em>#include &lt;lmptype.h&gt;</em><p>Data structure for packing 32-bit and 64-bit integers into double (communication) buffers</p>
<p>Using this union avoids aliasing issues by having member types (double, int) referencing the same buffer memory location.</p>
<p>The explicit constructor for 32-bit integers prevents compilers from (incorrectly) calling the double constructor when storing an int into a double buffer. <p><p><strong>Usage:</strong></p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">To copy an integer into a double buffer:</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="n">buf</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="kt">int</span>    <span class="n">foo</span> <span class="o">=</span>   <span class="mi">1</span><span class="p">;</span>
<span class="n">tagint</span> <span class="n">bar</span> <span class="o">=</span> <span class="mi">2</span><span class="o">&lt;&lt;</span><span class="mi">40</span><span class="p">;</span>
<span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">ubuf</span><span class="p">(</span><span class="n">foo</span><span class="p">).</span><span class="n">d</span><span class="p">;</span>
<span class="n">buf</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">ubuf</span><span class="p">(</span><span class="n">bar</span><span class="p">).</span><span class="n">d</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">To copy from a double buffer back to an int:</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">foo</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span>    <span class="n">ubuf</span><span class="p">(</span><span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]).</span><span class="n">i</span><span class="p">;</span>
<span class="n">bar</span> <span class="o">=</span> <span class="p">(</span><span class="n">tagint</span><span class="p">)</span> <span class="n">ubuf</span><span class="p">(</span><span class="n">buf</span><span class="p">[</span><span class="mi">2</span><span class="p">]).</span><span class="n">i</span><span class="p">;</span>
</pre></div>
</div>
</div>
<p>The typecasts prevent compiler warnings about possible truncation issues.</p>
</p>
 </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS4ubuf4ubufERKd">
<span id="_CPPv3N9LAMMPS_NS4ubuf4ubufERKd"></span><span id="_CPPv2N9LAMMPS_NS4ubuf4ubufERKd"></span><span id="LAMMPS_NS::ubuf::ubuf__doubleCR"></span><span class="target" id="unionLAMMPS__NS_1_1ubuf_1a5cdd4245af25171a133da99e9808170b"></span><em class="property"><span class="pre">inline</span></em> <code class="sig-name descname"><span class="pre">ubuf</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">double</span> <span class="pre">&amp;</span><em><span class="pre">arg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS4ubuf4ubufERKd" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS4ubuf4ubufERK7int64_t">
<span id="_CPPv3N9LAMMPS_NS4ubuf4ubufERK7int64_t"></span><span id="_CPPv2N9LAMMPS_NS4ubuf4ubufERK7int64_t"></span><span id="LAMMPS_NS::ubuf::ubuf__int64_tCR"></span><span class="target" id="unionLAMMPS__NS_1_1ubuf_1a86bb79057870b1bd9b4f9275e5d929fa"></span><em class="property"><span class="pre">inline</span></em> <code class="sig-name descname"><span class="pre">ubuf</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">int64_t</span> <span class="pre">&amp;</span><em><span class="pre">arg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS4ubuf4ubufERK7int64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N9LAMMPS_NS4ubuf4ubufERKi">
<span id="_CPPv3N9LAMMPS_NS4ubuf4ubufERKi"></span><span id="_CPPv2N9LAMMPS_NS4ubuf4ubufERKi"></span><span id="LAMMPS_NS::ubuf::ubuf__iCR"></span><span class="target" id="unionLAMMPS__NS_1_1ubuf_1a76e1c4df9fb2687d7f2055f90b08360d"></span><em class="property"><span class="pre">inline</span></em> <code class="sig-name descname"><span class="pre">ubuf</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <span class="pre">int</span> <span class="pre">&amp;</span><em><span class="pre">arg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N9LAMMPS_NS4ubuf4ubufERKi" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt id="_CPPv4N9LAMMPS_NS4ubuf1dE">
<span id="_CPPv3N9LAMMPS_NS4ubuf1dE"></span><span id="_CPPv2N9LAMMPS_NS4ubuf1dE"></span><span id="LAMMPS_NS::ubuf::d__double"></span><span class="target" id="unionLAMMPS__NS_1_1ubuf_1a873684cefeb665f3d5e6b495de57fc0d"></span><span class="pre">double</span> <code class="sig-name descname"><span class="pre">d</span></code><a class="headerlink" href="#_CPPv4N9LAMMPS_NS4ubuf1dE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N9LAMMPS_NS4ubuf1iE">
<span id="_CPPv3N9LAMMPS_NS4ubuf1iE"></span><span id="_CPPv2N9LAMMPS_NS4ubuf1iE"></span><span id="LAMMPS_NS::ubuf::i__int64_t"></span><span class="target" id="unionLAMMPS__NS_1_1ubuf_1a193e7d4afbc8ac1c220aa7130e279451"></span><span class="pre">int64_t</span> <code class="sig-name descname"><span class="pre">i</span></code><a class="headerlink" href="#_CPPv4N9LAMMPS_NS4ubuf1iE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="commands_list.html" class="btn btn-neutral float-right" title="Commands" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Classes_input.html" class="btn btn-neutral float-left" title="4.7.3. LAMMPS Input Base Class" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2003-2020 Sandia Corporation

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>