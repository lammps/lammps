

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.3.1. The LIBLAMMPS Fortran Module &mdash; LAMMPS documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/lammps.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/lammps.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
  <script src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="1.4.1. Using the C++ API directly" href="Cplusplus.html" />
    <link rel="prev" title="1.1.10. Extending the C API" href="Library_add.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="Manual.html">
          

          
            
            <img src="_static/lammps-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="lammps_version">Version: <b>24 Dec 2020</b></div>
              <div class="lammps_release">git info: patch 24Dec2020-115-g2b8a0d310</div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Install.html">2. Install LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Build.html">3. Build LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Run_head.html">4. Run LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Commands.html">5. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Packages.html">6. Optional packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Speed.html">7. Accelerate performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Howto.html">8. Howto discussions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">9. Example scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tools.html">10. Auxiliary tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="Errors.html">11. Errors</a></li>
</ul>
<p class="caption"><span class="caption-text">Programmer Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="Library.html">1. LAMMPS Library Interfaces</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Library.html#lammps-c-library-api">1.1. LAMMPS C Library API</a></li>
<li class="toctree-l2"><a class="reference internal" href="Library.html#lammps-python-apis">1.2. LAMMPS Python APIs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="Library.html#lammps-fortran-api">1.3. LAMMPS Fortran API</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">1.3.1. The <code class="docutils literal notranslate"><span class="pre">LIBLAMMPS</span></code> Fortran Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-or-deleting-a-lammps-object">1.3.2. Creating or deleting a LAMMPS object</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-liblammps-module-api">1.3.3. The <code class="docutils literal notranslate"><span class="pre">LIBLAMMPS</span></code> module API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Library.html#lammps-cplusplus-api">1.4. LAMMPS C++ API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Python_head.html">2. Use Python with LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Modify.html">3. Modifying &amp; extending LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Developer.html">4. Information for Developers</a></li>
</ul>
<p class="caption"><span class="caption-text">Index</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="commands_list.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="fixes.html">Fixes</a></li>
<li class="toctree-l1"><a class="reference internal" href="computes.html">Computes</a></li>
<li class="toctree-l1"><a class="reference internal" href="pairs.html">Pair Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="bonds.html">Bond Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="angles.html">Angle Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="dihedrals.html">Dihedral Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="impropers.html">Improper Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="fix_modify_atc_commands.html">fix_modify AtC commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Bibliography.html">Bibliography</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="Manual.html">LAMMPS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="Manual.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="Library.html"><span class="section-number">1. </span>LAMMPS Library Interfaces</a> &raquo;</li>
        
      <li><span class="section-number">1.3.1. </span>The <code class="docutils literal notranslate"><span class="pre">LIBLAMMPS</span></code> Fortran Module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
          <a href="http://lammps.sandia.gov">Website</a>
          <a href="Commands_all.html">Commands</a>
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="Cplusplus.html" class="btn btn-neutral float-right" title="1.4.1. Using the C++ API directly" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Library_add.html" class="btn btn-neutral float-left" title="1.1.10. Extending the C API" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-liblammps-fortran-module">
<h1><span class="section-number">1.3.1. </span>The <code class="docutils literal notranslate"><span class="pre">LIBLAMMPS</span></code> Fortran Module<a class="headerlink" href="#the-liblammps-fortran-module" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">LIBLAMMPS</span></code> module provides an interface to call LAMMPS from a
Fortran code.  It is based on the LAMMPS C-library interface and
requires a Fortran 2003 compatible compiler to be compiled.</p>
<p>While C libraries have a defined binary interface (ABI) and can thus be
used from multiple compiler versions from different vendors for as long
as they are compatible with the hosting operating system, the same is
not true for Fortran codes.  Thus the LAMMPS Fortran module needs to be
compiled alongside the code using it from the source code in
<code class="docutils literal notranslate"><span class="pre">fortran/lammps.f90</span></code>.  When linking, you also need to
<a class="reference internal" href="Build_link.html"><span class="doc">link to the LAMMPS library</span></a>.  A typical command line
for a simple program using the Fortran interface would be:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpifort -o testlib.x  lammps.f90 testlib.f90 -L. -llammps
</pre></div>
</div>
<p>Please note, that the MPI compiler wrapper is only required when the
calling the library from an MPI parallel code.  Please also note the
order of the source files: the <code class="docutils literal notranslate"><span class="pre">lammps.f90</span></code> file needs to be compiled
first, since it provides the <code class="docutils literal notranslate"><span class="pre">LIBLAMMPS</span></code> module that is imported by
the Fortran code using the interface.  A working example code can be
found together with equivalent examples in C and C++ in the
<code class="docutils literal notranslate"><span class="pre">examples/COUPLE/simple</span></code> folder of the LAMMPS distribution.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 9Oct2020.</span></p>
</div>
<div class="note admonition">
<p class="admonition-title">Work in Progress</p>
<p>This Fortran module is work in progress and only the documented
functionality is currently available. The final implementation should
cover the entire range of functionality available in the C and
Python library interfaces.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A contributed (and complete!) Fortran interface that more
closely resembles the C-library interface is available
in the <code class="docutils literal notranslate"><span class="pre">examples/COUPLE/fortran2</span></code> folder.  Please see the
<code class="docutils literal notranslate"><span class="pre">README</span></code> file in that folder for more information about it
and how to contact its author and maintainer.</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="creating-or-deleting-a-lammps-object">
<h1><span class="section-number">1.3.2. </span>Creating or deleting a LAMMPS object<a class="headerlink" href="#creating-or-deleting-a-lammps-object" title="Permalink to this headline">¶</a></h1>
<p>With the Fortran interface the creation of a <a class="reference internal" href="Classes_lammps.html#_CPPv4N9LAMMPS_NS6LAMMPSE" title="LAMMPS_NS::LAMMPS"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">LAMMPS</span></code></a> instance is included in the constructor for
creating the <code class="xref f f-func docutils literal notranslate"><span class="pre">lammps()</span></code> derived type.  To import the definition of
that type and its type bound procedures you need to add a <code class="docutils literal notranslate"><span class="pre">USE</span>
<span class="pre">LIBLAMMPS</span></code> statement.  Internally it will call either
<a class="reference internal" href="Library_create.html#_CPPv419lammps_open_fortraniPPci" title="lammps_open_fortran"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_open_fortran()</span></code></a> or <a class="reference internal" href="Library_create.html#_CPPv418lammps_open_no_mpiiPPcPPv" title="lammps_open_no_mpi"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_open_no_mpi()</span></code></a> from
the C library API to create the class instance.  All arguments are
optional and <a class="reference internal" href="Library_create.html#_CPPv415lammps_mpi_initv" title="lammps_mpi_init"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_mpi_init()</span></code></a> will be called automatically,
if it is needed.  Similarly, a possible call to <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_finalize()</span></code>
is integrated into the <code class="xref f f-func docutils literal notranslate"><span class="pre">close()</span></code> function and triggered with
the optional logical argument set to <code class="docutils literal notranslate"><span class="pre">.true.</span></code>. Here is a simple example:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">PROGRAM </span><span class="n">testlib</span>
  <span class="k">USE </span><span class="n">LIBLAMMPS</span>                 <span class="c">! include the LAMMPS library interface</span>
  <span class="k">TYPE</span><span class="p">(</span><span class="n">lammps</span><span class="p">)</span>     <span class="kd">::</span> <span class="n">lmp</span>       <span class="c">! derived type to hold LAMMPS instance</span>
  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="k">DIMENSION</span><span class="p">(</span><span class="o">*</span><span class="p">),</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">args</span> <span class="o">=</span> <span class="p">&amp;</span>
      <span class="p">[</span> <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span> <span class="kd">::</span> <span class="s1">&#39;liblammps&#39;</span><span class="p">,</span> <span class="s1">&#39;-log&#39;</span><span class="p">,</span> <span class="s1">&#39;none&#39;</span> <span class="p">]</span>

  <span class="c">! create a LAMMPS instance (and initialize MPI)</span>
  <span class="n">lmp</span> <span class="o">=</span> <span class="n">lammps</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
  <span class="c">! get and print numerical version code</span>
  <span class="k">PRINT</span><span class="o">*</span><span class="p">,</span> <span class="s1">&#39;LAMMPS Version: &#39;</span><span class="p">,</span> <span class="n">lmp</span><span class="p">%</span><span class="n">version</span><span class="p">()</span>
  <span class="c">! delete LAMMPS instance (and shuts down MPI)</span>
  <span class="k">CALL </span><span class="n">lmp</span><span class="p">%</span><span class="k">close</span><span class="p">(.</span><span class="n">true</span><span class="p">.)</span>

<span class="k">END PROGRAM </span><span class="n">testlib</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="executing-lammps-commands">
<h2>Executing LAMMPS commands<a class="headerlink" href="#executing-lammps-commands" title="Permalink to this headline">¶</a></h2>
<p>Once a LAMMPS instance is created, it is possible to “drive” the LAMMPS
simulation by telling LAMMPS to read commands from a file, or pass
individual or multiple commands from strings or lists of strings.  This
is done similar to how it is implemented in the <cite>C-library
&lt;pg_lib_execute&gt;</cite> interface. Before handing off the calls to the
C-library interface, the corresponding Fortran versions of the calls
(<code class="xref f f-func docutils literal notranslate"><span class="pre">file()</span></code>, <code class="xref f f-func docutils literal notranslate"><span class="pre">command()</span></code>, <code class="xref f f-func docutils literal notranslate"><span class="pre">commands_list()</span></code>, and
<code class="xref f f-func docutils literal notranslate"><span class="pre">commands_string()</span></code>) have to make a copy of the strings passed as
arguments so that they can be modified to be compatible with the
requirements of strings in C without affecting the original strings.
Those copies are automatically deleted after the functions return.
Below is a small demonstration of the uses of the different functions:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">PROGRAM </span><span class="n">testcmd</span>
  <span class="k">USE </span><span class="n">LIBLAMMPS</span>
  <span class="k">TYPE</span><span class="p">(</span><span class="n">lammps</span><span class="p">)</span>     <span class="kd">::</span> <span class="n">lmp</span>
  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span> <span class="kd">::</span> <span class="n">cmds</span>
  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">40</span><span class="p">),</span><span class="k">ALLOCATABLE</span> <span class="kd">::</span> <span class="n">cmdlist</span><span class="p">(:)</span>
  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="kd">::</span> <span class="n">trimmed</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">i</span>

  <span class="n">lmp</span> <span class="o">=</span> <span class="n">lammps</span><span class="p">()</span>
  <span class="k">CALL </span><span class="n">lmp</span><span class="p">%</span><span class="k">file</span><span class="p">(</span><span class="s1">&#39;in.melt&#39;</span><span class="p">)</span>
  <span class="k">CALL </span><span class="n">lmp</span><span class="p">%</span><span class="n">command</span><span class="p">(</span><span class="s1">&#39;variable zpos index 1.0&#39;</span><span class="p">)</span>
  <span class="c">! define 10 groups of 10 atoms each</span>
  <span class="k">ALLOCATE</span><span class="p">(</span><span class="n">cmdlist</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
  <span class="k">DO </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span>
      <span class="k">WRITE</span><span class="p">(</span><span class="n">trimmed</span><span class="p">,</span><span class="s1">&#39;(I10)&#39;</span><span class="p">)</span> <span class="mi">10</span><span class="o">*</span><span class="n">i</span>
      <span class="k">WRITE</span><span class="p">(</span><span class="n">cmdlist</span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="s1">&#39;(A,I1,A,I10,A,A)&#39;</span><span class="p">)</span>       <span class="p">&amp;</span>
          <span class="s1">&#39;group g&#39;</span><span class="p">,</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39; id &#39;</span><span class="p">,</span><span class="mi">10</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="nb">ADJUSTL</span><span class="p">(</span><span class="n">trimmed</span><span class="p">)</span>
  <span class="k">END DO</span>
<span class="k">  CALL </span><span class="n">lmp</span><span class="p">%</span><span class="n">commands_list</span><span class="p">(</span><span class="n">cmdlist</span><span class="p">)</span>
  <span class="c">! run multiple commands from multi-line string</span>
  <span class="n">cmds</span> <span class="o">=</span> <span class="s1">&#39;clear&#39;</span> <span class="o">//</span> <span class="nb">NEW_LINE</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span> <span class="o">//</span>                       <span class="p">&amp;</span>
      <span class="s1">&#39;region  box block 0 2 0 2 0 2&#39;</span> <span class="o">//</span> <span class="nb">NEW_LINE</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span> <span class="o">//</span>  <span class="p">&amp;</span>
      <span class="s1">&#39;create_box 1 box&#39;</span> <span class="o">//</span> <span class="nb">NEW_LINE</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span> <span class="o">//</span>               <span class="p">&amp;</span>
      <span class="s1">&#39;create_atoms 1 single 1.0 1.0 ${zpos}&#39;</span>
  <span class="k">CALL </span><span class="n">lmp</span><span class="p">%</span><span class="n">commands_string</span><span class="p">(</span><span class="n">cmds</span><span class="p">)</span>
  <span class="k">CALL </span><span class="n">lmp</span><span class="p">%</span><span class="k">close</span><span class="p">()</span>

<span class="k">END PROGRAM </span><span class="n">testcmd</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="the-liblammps-module-api">
<h1><span class="section-number">1.3.3. </span>The <code class="docutils literal notranslate"><span class="pre">LIBLAMMPS</span></code> module API<a class="headerlink" href="#the-liblammps-module-api" title="Permalink to this headline">¶</a></h1>
<p>Below are the detailed descriptions of definitions and interfaces
of the contents of the <code class="docutils literal notranslate"><span class="pre">LIBLAMMPS</span></code> Fortran interface to LAMMPS.</p>
<dl class="type">
<dt id="f/_/lammps">
<em class="property"><span class="pre">type</span>&#160; </em><code class="sig-name descname"><span class="pre">lammps</span></code><a class="headerlink" href="#f/_/lammps" title="Permalink to this definition">¶</a></dt>
<dd><p>Derived type that is the general class of the Fortran interface.
It holds a reference to the <a class="reference internal" href="Classes_lammps.html#_CPPv4N9LAMMPS_NS6LAMMPSE" title="LAMMPS_NS::LAMMPS"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">LAMMPS</span></code></a> class instance
that any of the included calls are forwarded to.</p>
<dl class="field-list simple">
<dt class="field-odd">Type fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="sig-name descname">% </code><code class="sig-name descname">handle</code><em> [</em><em>c_ptr</em><em>]</em> :: reference to the LAMMPS class</p></li>
<li><p><code class="sig-name descname">% </code><code class="sig-name descname">close</code> :: <code class="xref f f-func docutils literal notranslate"><span class="pre">close()</span></code></p></li>
<li><p><code class="sig-name descname">% </code><code class="sig-name descname">version</code> :: <code class="xref f f-func docutils literal notranslate"><span class="pre">version()</span></code></p></li>
<li><p><code class="sig-name descname">% </code><code class="sig-name descname">file</code> :: <code class="xref f f-func docutils literal notranslate"><span class="pre">file()</span></code></p></li>
<li><p><code class="sig-name descname">% </code><code class="sig-name descname">command</code> :: <code class="xref f f-func docutils literal notranslate"><span class="pre">command()</span></code></p></li>
<li><p><code class="sig-name descname">% </code><code class="sig-name descname">commands_list</code> :: <code class="xref f f-func docutils literal notranslate"><span class="pre">commands_list()</span></code></p></li>
<li><p><code class="sig-name descname">% </code><code class="sig-name descname">commands_string</code> :: <code class="xref f f-func docutils literal notranslate"><span class="pre">commands_string()</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt>
<em class="property"><span class="pre">function</span>&#160; </em><code class="sig-name descname"><span class="pre">lammps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">args</span></em><span class="optional">[</span>, <em class="sig-param"><span class="pre">comm</span></em><span class="optional">]</span><span class="sig-paren">)</span></dt>
<dd><p>This is the constructor for the Fortran class and will forward
the arguments to a call to either <a class="reference internal" href="Library_create.html#_CPPv419lammps_open_fortraniPPci" title="lammps_open_fortran"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_open_fortran()</span></code></a>
or <a class="reference internal" href="Library_create.html#_CPPv418lammps_open_no_mpiiPPcPPv" title="lammps_open_no_mpi"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_open_no_mpi()</span></code></a>. If the LAMMPS library has been
compiled with MPI support, it will also initialize MPI, if it has
not already been initialized before.</p>
<p>The <em>args</em> argument with the list of command line parameters is
optional and so it the <em>comm</em> argument with the MPI communicator.
If <em>comm</em> is not provided, <code class="docutils literal notranslate"><span class="pre">MPI_COMM_WORLD</span></code> is assumed. For
more details please see the documentation of <a class="reference internal" href="Library_create.html#_CPPv411lammps_openiPPc8MPI_CommPPv" title="lammps_open"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_open()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (*)<em> [</em><em>character(len=*)</em><em>,</em><em>optional</em><em>]</em> :: arguments as list of strings</p>
</dd>
<dt class="field-even">Options</dt>
<dd class="field-even"><p><strong>comm</strong><em> [</em><em>integer</em><em>,</em><em>optional</em><em>]</em> :: MPI communicator</p>
</dd>
<dt class="field-odd">Return</dt>
<dd class="field-odd"><p><strong>lammps</strong> :: an instance of the <code class="xref f f-type docutils literal notranslate"><span class="pre">lammps</span></code> derived type</p>
</dd>
</dl>
</dd></dl>

<dl class="subroutine">
<dt id="f/_/close">
<em class="property"><span class="pre">subroutine</span>&#160; </em><code class="sig-name descname"><span class="pre">close</span></code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="pre">finalize</span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#f/_/close" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will close down the LAMMPS instance through calling
<a class="reference internal" href="Library_create.html#_CPPv412lammps_closePv" title="lammps_close"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_close()</span></code></a>.  If the <em>finalize</em> argument is present and
has a value of <code class="docutils literal notranslate"><span class="pre">.true.</span></code>, then this subroutine also calls
<a class="reference internal" href="Library_create.html#_CPPv419lammps_mpi_finalizev" title="lammps_mpi_finalize"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_mpi_finalize()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Options</dt>
<dd class="field-odd"><p><strong>finalize</strong><em> [</em><em>logical</em><em>,</em><em>optional</em><em>]</em> :: shut down the MPI environment of the LAMMPS library if true.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="f/_/version">
<em class="property"><span class="pre">function</span>&#160; </em><code class="sig-name descname"><span class="pre">version</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#f/_/version" title="Permalink to this definition">¶</a></dt>
<dd><p>This method returns the numeric LAMMPS version like <a class="reference internal" href="Library_config.html#_CPPv414lammps_versionPv" title="lammps_version"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_version()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Return</dt>
<dd class="field-odd"><p><strong>integer</strong> :: LAMMPS version</p>
</dd>
</dl>
</dd></dl>

<hr class="docutils" />
<dl class="subroutine">
<dt id="f/_/file">
<em class="property"><span class="pre">subroutine</span>&#160; </em><code class="sig-name descname"><span class="pre">file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#f/_/file" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will call <a class="reference internal" href="Library_execute.html#_CPPv411lammps_filePvPKc" title="lammps_file"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_file()</span></code></a> to have LAMMPS read
and process commands from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong><em> [</em><em>character(len=*)</em><em>]</em> :: name of file with LAMMPS commands</p>
</dd>
</dl>
</dd></dl>

<dl class="subroutine">
<dt id="f/_/command">
<em class="property"><span class="pre">subroutine</span>&#160; </em><code class="sig-name descname"><span class="pre">command</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cmd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#f/_/command" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will call <a class="reference internal" href="Library_execute.html#_CPPv414lammps_commandPvPKc" title="lammps_command"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_command()</span></code></a> to have LAMMPS
execute a single command.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cmd</strong><em> [</em><em>character(len=*)</em><em>]</em> :: single LAMMPS command</p>
</dd>
</dl>
</dd></dl>

<dl class="subroutine">
<dt id="f/_/commands_list">
<em class="property"><span class="pre">subroutine</span>&#160; </em><code class="sig-name descname"><span class="pre">commands_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cmds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#f/_/commands_list" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will call <a class="reference internal" href="Library_execute.html#_CPPv420lammps_commands_listPviPPKc" title="lammps_commands_list"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_commands_list()</span></code></a> to have LAMMPS
execute a list of input lines.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cmd</strong> (*)<em> [</em><em>character(len=*)</em><em>]</em> :: list of LAMMPS input lines</p>
</dd>
</dl>
</dd></dl>

<dl class="subroutine">
<dt id="f/_/commands_string">
<em class="property"><span class="pre">subroutine</span>&#160; </em><code class="sig-name descname"><span class="pre">commands_string</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#f/_/commands_string" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will call <a class="reference internal" href="Library_execute.html#_CPPv422lammps_commands_stringPvPKc" title="lammps_commands_string"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">lammps_commands_string()</span></code></a> to have LAMMPS
execute a block of commands from a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>str</strong><em> [</em><em>character(len=*)</em><em>]</em> :: LAMMPS input in string</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Cplusplus.html" class="btn btn-neutral float-right" title="1.4.1. Using the C++ API directly" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Library_add.html" class="btn btn-neutral float-left" title="1.1.10. Extending the C API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2003-2020 Sandia Corporation

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>